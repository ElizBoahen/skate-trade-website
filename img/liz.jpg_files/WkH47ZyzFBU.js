/*!CK:75116!*//*1437403693,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["15DuS"]); }

__d("ReactComposerDragDropPromptContainer.react",["ReactComposerAttachmentType","ReactComposerConfig","ReactComposerDragDropPromptLazy.react","ReactComposerPhotoUploader","ReactComposerPropsAndStoreBasedStateMixin","ReactComposerScrapedAttachmentStore","ReactComposerScrapedAttachmentPhotoDropWarningDialog.react","ReactComposerStatusUtils","ReactComposerVideoUploadStore","ReactComponentWithPureRenderMixin","React","ReactLayeredComponentMixin"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){b.__markCompiled&&b.__markCompiled();var s=q,t=s.PropTypes,u=q.createClass({displayName:"ReactComposerDragDropPromptContainer",_uploader:(undefined),mixins:[p,r,k(o)],propTypes:{root:t.object.isRequired,config:h.isRequired},statics:{calculateState:function(v,w,x){return {enabled:!o.getVideo(v)};}},getAttachmentInitialState:function(v,w){return {photoDropWarningShown:false,pendingFiles:null};},componentWillMount:function(){var v=this.props.config.attachmentsConfig[g.MEDIA];this._uploader=new j(this.context.composerID,v.photoLimit,this.context.actorID);},renderLayers:function(){return {photoDropWarningDialog:q.createElement(m,{shown:this.state.photoDropWarningShown,onCancel:this._onPhotoDropWarningCancel,onConfirm:this._onPhotoDropWarningConfirm})};},render:function(){if(!this.state.enabled)return null;return (q.createElement(i,{root:this.props.root,onFilesDrop:this._onFilesDrop,onURLDrop:this._onURLDrop}));},_onFilesDrop:function(v){if(l.hasAttachment(this.context.composerID)&&this.state.pendingFiles==null){this.setState({photoDropWarningShown:true,pendingFiles:v});return;}n.uploadDroppedFiles(this.context.composerID,v,this._uploader);},_onPhotoDropWarningCancel:function(){this.setState({photoDropWarningShown:false,pendingFiles:null});},_onPhotoDropWarningConfirm:function(){var v=this.state.pendingFiles;this.setState({photoDropWarningShown:false,pendingFiles:null});this._onFilesDrop(v);},_onURLDrop:function(v){n.scrapeLink(this.context.composerID,this.context.targetID,v);}});e.exports=u;},null);