/*!CK:4288316087!*//*1438572769,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["36jEa"]); }

__d("ReactComposerStatusAttachmentContainer.react",["ReactComposerAttachmentActions","ReactComposerAttachmentStore","ReactComposerAttachmentType","ReactComposerConfig","ReactComposerContextMixin","ReactComposerPhotoUploader","ReactComposerPropsAndStoreBasedStateMixin","ReactComposerScrapedAttachmentActions","ReactComposerScrapedAttachmentStore","ReactComposerStatusAttachment.react","ReactComposerStatusStore","ReactComposerTaggerActions","ReactComposerTaggerStore","ReactComposerStatusUtils","React","URLMatcher","URLScraper"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w){b.__markCompiled&&b.__markCompiled();var x=u,y=x.PropTypes,z=u.createClass({displayName:"ReactComposerStatusAttachmentContainer",_permissiveMatch:(undefined),_uploader:(undefined),mixins:[k,m(h,q,s,o)],propTypes:{additionalTaggers:y.arrayOf(y.shape({button:y.element.isRequired,container:y.element.isRequired})),config:j.isRequired,onPostIntent:y.func,peopleTaggerPresenter:y.object,placeholder:y.string.isRequired,typeaheadView:y.func,typeaheadViewProps:y.object},statics:{calculateState:function(aa,ba){var ca=h.isSelectedAttachmentActive(aa);return {focused:ca,taggersData:s.getTaggersData(aa),scrapedAttachment:o.getMarkup(aa),permissiveMatch:o.getPermissiveMatch(aa)};}},getDefaultProps:function(){return {taggersData:{}};},componentWillMount:function(){var aa=this.props.config.attachmentsConfig[i.MEDIA];this._uploader=new l(this.context.composerID,aa.photoLimit,this.context.actorID);},componentDidMount:function(){var aa=this.props.config.attachmentsConfig[i.STATUS];n.enabled(this.context.composerID,aa.canScrapeShare);},render:function(){return (u.createElement(p,u.__spread({},this.props,this.state,{onFocus:this._onFocus,onMentionsInputChange:this._onMentionsInputChange,onPasteFiles:this._onPasteFiles,onPasteRawText:this._onPasteRawText,postButtonModule:this.props.postButtonModule})));},_onFocus:function(){g.selectAttachment(this.context.composerID,i.STATUS,{fromFocus:true});r.selectTagger(this.context.composerID,null);},_onMentionsInputChange:function(aa){var ba=aa.getCurrentContent().getPlainText();if(o.isEnabled(this.context.composerID)&&!w.trigger(ba))this._scrapeLink(ba);},_onPasteFiles:function(aa){g.selectAttachment(this.context.composerID,i.MEDIA);t.uploadPastedFile(this.context.composerID,aa[0],this._uploader);},_onPasteRawText:function(aa){if(o.isEnabled(this.context.composerID))this._scrapeLink(aa);},_scrapeLink:function(aa){if(o.getMarkup(this.context.composerID))return;var ba=v.permissiveMatch(aa);if(ba!==this.state.permissiveMatch){n.setPermissiveMatch(this.context.composerID,ba);var ca=w.match(aa)||ba;if(ca)t.scrapeLink(this.context.composerID,this.context.targetID,ca);}}});e.exports=z;},null);