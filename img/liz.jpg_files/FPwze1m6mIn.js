/*!CK:657953799!*//*1438811802,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["TWBJU"]); }

__d("BasicTypeaheadLoggerJSConstants",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={EventNames:{MENTIONS:"mentions",TINDER_MENTIONS:"tinder_mentions",REACT_COMPOSER_MENTIONS:"react_composer_mentions",PHOTO_TAGGER:"photo-tagger",PROFILE:"profile",TIMELINE_COLLECTION:"timeline_collection",OGCOMPOSER_TAGGER:"ogcomposer-tagger",PLACES_TYPEAHEAD:"places_typeahead",CHAT_MENTIONS_ENTITIES:"chat_mentions_entities",REACT_COMPOSER_OG_TAGGER:"react_composer_og_tagger",REACT_SHARE_DIALOG_OG_TAGGER:"react_share_dialog_og_tagger",REACT_COMPOSER_LOCATION_TAGGER:"react_composer_location_tagger",REACT_SHARE_DIALOG_LOCATION_TAGGER:"react_share_dialog_location_tagger"}};},null);
__d("ReactComposerTaggerType",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={CAMERA:"CAMERA",PEOPLE:"PEOPLE",OG:"OG",LOCATION:"LOCATION",ACTIVITY:"ACTIVITY",BACKDATE:"BACKDATE",TARGETING:"TARGETING"};},null);
__d("SharerType",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={MESSAGE_ONLY:"message_only",ALL_MODES:"all_modes",PAGE_ONLY:"page_only",PAGE_VIEWER:"page_viewer"};},null);
__d("ReactComposerAudienceSelector.react",["DOM","PrivacySelector","ReactComponentWithPureRenderMixin","React","cx"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l=j,m=l.PropTypes,n=j.createClass({displayName:"ReactComposerAudienceSelector",mixins:[i],propTypes:{audienceXHP:m.instanceOf(HTMLElement).isRequired,onChange:m.func.isRequired,viewerIsTarget:m.bool.isRequired},componentDidMount:function(){if(this.props.viewerIsTarget)setTimeout(function(){var o=h.get(this.props.audienceXHP);if(o)o.subscribe('changed',this._onChange);}.bind(this),0);if(this.refs&&this.refs.audienceSelector){g.setContent(j.findDOMNode(this.refs.audienceSelector),this.props.audienceXHP);}else this._layerHack();},render:function(){return (j.createElement("div",{ref:"audienceSelector",className:"_5dd8"}));},_onChange:function(o,p){if(this.isMounted())this.props.onChange(p);},_layerHack:function(){setTimeout(function(){if(this.refs&&this.refs.audienceSelector){g.setContent(j.findDOMNode(this.refs.audienceSelector),this.props.audienceXHP);}else this._layerHack();}.bind(this),100);}});e.exports=n;},null);
__d("ReactComposerPhotoActionType",["keyMirror"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();e.exports=g({PHOTO_RECOGNITION_STARTED:null,PHOTO_RECOGNITION_FINISHED:null,PHOTO_RECOGNITION_ALL_FINISHED:null,PHOTO_ADD_FACEBOX:null,PHOTO_TAG_FACEBOX:null,PHOTO_UNTAG_FACEBOX:null,PHOTO_REMOVE:null,PHOTO_UNTAG_SUBJECT_FROM_ALL_PHOTOS:null,PHOTO_EDIT_STARTED:null,PHOTO_EDIT_FINISHED:null,PHOTO_SET_BEING_TAGGED:null});},null);
__d("ReactComposerPhotoUploadActionType",["keyMirror"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();e.exports=g({PHOTO_UPLOAD_INPUT_CLICKED:null,PHOTO_UPLOAD_ENQUEUED:null,PHOTO_UPLOAD_RESIZE_STARTED:null,PHOTO_UPLOAD_RESIZE_PROGRESS:null,PHOTO_UPLOAD_RESIZE_DONE:null,PHOTO_UPLOAD_RESIZE_FAILED:null,PHOTO_UPLOAD_RESIZER_UNAVAILABLE:null,PHOTO_UPLOAD_UPLOADING:null,PHOTO_UPLOAD_PROGRESS:null,PHOTO_UPLOAD_DONE:null,PHOTO_UPLOAD_FAILED:null,PHOTO_UPLOAD_REMOVE:null,PHOTO_UPLOAD_MOVED:null,PHOTO_UPLOAD_RETRY:null,PHOTOS_SELECT:null});},null);
__d("ReactComposerPhotoStore",["ReactComposerPhotoActionType","ReactComposerPhotoUploadActionType","ReactComposerStoreBase","immutable"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();var k=j.Record({id:null,uploadID:null,thumbSrc:null,isRecognizingFaceboxes:false,faceboxes:j.Map()}),l=j.Record({id:null,photoID:null,x:null,y:null,top:null,left:null,width:null,height:null,croppedURI:null,taggedSubjectID:null,taggedValue:null,isMagicTag:false});for(var m in i)if(i.hasOwnProperty(m))o[m]=i[m];var n=i===null?null:i.prototype;o.prototype=Object.create(n);o.prototype.constructor=o;o.__superConstructor__=i;function o(){"use strict";i.call(this,(function(){return {photos:j.Map(),photoBeingTagged:null,recognizing:false};}),(function(p){switch(p.type){case h.PHOTO_UPLOAD_DONE:this.$ReactComposerPhotoStore0(p);break;case g.PHOTO_RECOGNITION_STARTED:this.$ReactComposerPhotoStore1(p);break;case g.PHOTO_RECOGNITION_FINISHED:this.$ReactComposerPhotoStore2(p);break;case g.PHOTO_RECOGNITION_ALL_FINISHED:this.$ReactComposerPhotoStore3(p);break;case g.PHOTO_ADD_FACEBOX:this.$ReactComposerPhotoStore4(p);break;case g.PHOTO_TAG_FACEBOX:this.$ReactComposerPhotoStore5(p);break;case g.PHOTO_UNTAG_FACEBOX:this.$ReactComposerPhotoStore6(p);break;case g.PHOTO_REMOVE:this.$ReactComposerPhotoStore7(p);break;case g.PHOTO_UNTAG_SUBJECT_FROM_ALL_PHOTOS:this.$ReactComposerPhotoStore8(p);break;case g.PHOTO_SET_BEING_TAGGED:this.$ReactComposerPhotoStore9(p);break;default:}}.bind(this)));}o.prototype.getPhotos=function(p){"use strict";return this.getComposerData(p).photos;};o.prototype.isLimitExceeded=function(p,q){"use strict";return this.getPhotos(p).size>q;};o.prototype.getPhoto=function(p,q){"use strict";return this.getComposerData(p).photos.get(q);};o.prototype.isRecognizing=function(p){"use strict";return this.getComposerData(p).recognizing;};o.prototype.getIsSubjectPhotoTagged=function(p,q){"use strict";var r=this.getComposerData(p).photos;return r.some(function(s){return s.faceboxes.some(function(t){return t.taggedSubjectID===q;});});};o.prototype.getAllTaggedFaceboxes=function(p){"use strict";var q=this.getPhotos(p),r=[];q.forEach(function(s){r=r.concat(s.faceboxes.toArray());});return r.filter(function(s){return !!s.get('taggedSubjectID');});};o.prototype.getPhotoBeingTagged=function(p){"use strict";return this.getComposerData(p).photoBeingTagged;};o.prototype.$ReactComposerPhotoStore0=function(p){"use strict";var q=this.validateAction(p,['composerID','uploadID','photoID','thumbSrc']),r=q[0],s=q[1],t=q[2],u=q[3],v=this.getComposerData(r);v.photos=v.photos.set(t,new k({id:t,uploadID:s,thumbSrc:u}));this.emitChange(r);};o.prototype.$ReactComposerPhotoStore1=function(p){"use strict";var q=this.validateAction(p,['composerID','photoID']),r=q[0],s=q[1],t=this.getComposerData(r);t.photos=t.photos.update(s,function(u){return u.set('isRecognizingFaceboxes',true);});t.recognizing=true;this.emitChange(r);};o.prototype.$ReactComposerPhotoStore2=function(p){"use strict";var q=this.validateAction(p,['composerID','photoID']),r=q[0],s=q[1],t=this.getComposerData(r);t.photos=t.photos.update(s,function(u){return u.set('isRecognizingFaceboxes',false);});this.emitChange(r);};o.prototype.$ReactComposerPhotoStore3=function(p){"use strict";var q=this.validateAction(p,['composerID','photos']),r=q[0],s=q[1],t=this.getComposerData(r);t.recognizing=false;t.photos=t.photos.map(function(u){return s.indexOf(u.id)!==-1?u.set('isRecognizingFaceboxes',false):u;});this.emitChange(r);};o.prototype.$ReactComposerPhotoStore4=function(p){"use strict";var q=this.validateAction(p,['composerID','photoID','facebox']),r=q[0],s=q[1],t=q[2],u=this.getComposerData(r),v=t.bestRecognition,w=null,x=null;if(v){w=v.subjectID;x=v.value;}u.photos=u.photos.update(s,function(y){return y.update('faceboxes',function(z){return z.set(t.id,new l({id:t.id,photoID:s,x:t.x,y:t.y,top:t.top,left:t.left,width:t.width,height:t.height,croppedURI:t.croppedURI,taggedSubjectID:w,taggedValue:x,isMagicTag:!!w}));});});this.emitChange(r);};o.prototype.$ReactComposerPhotoStore5=function(p){"use strict";var q=this.validateAction(p,['composerID','photoID','faceboxID','subjectID','value']),r=q[0],s=q[1],t=q[2],u=q[3],v=q[4],w=this.getComposerData(r);w.photos=w.photos.update(s,function(x){return x.update('faceboxes',function(y){return y.update(t,function(z){return z.withMutations(function(aa){return aa.set('taggedSubjectID',u).set('taggedValue',v).set('isMagicTag',false);});});});});this.emitChange(r);};o.prototype.$ReactComposerPhotoStore6=function(p){"use strict";var q=this.validateAction(p,['composerID','photoID','faceboxID']),r=q[0],s=q[1],t=q[2],u=this.getComposerData(r);u.photos=u.photos.update(s,function(v){return v.update('faceboxes',function(w){return w.update(t,function(x){return x.withMutations(function(y){return y.remove('taggedSubjectID').remove('taggedValue').set('isMagicTag',false);});});});});this.emitChange(r);};o.prototype.$ReactComposerPhotoStore7=function(p){"use strict";var q=this.validateAction(p,['composerID','photoID']),r=q[0],s=q[1],t=this.getComposerData(r);t.photos=t.photos["delete"](s);};o.prototype.$ReactComposerPhotoStore8=function(p){"use strict";var q=this.validateAction(p,['composerID','subjectID']),r=q[0],s=q[1],t=this.getComposerData(r);t.photos=t.photos.map(function(u){return u.update('faceboxes',function(v){return v.map(function(w){if(w.taggedSubjectID!==s)return w;return w.withMutations(function(x){return x.remove('taggedSubjectID').remove('taggedValue').set('isMagicTag',false);});});});});this.emitChange(r);};o.prototype.$ReactComposerPhotoStore9=function(p){"use strict";var q=this.validateAction(p,['composerID','photoID']),r=q[0],s=q[1],t=this.getComposerData(r);t.photoBeingTagged=s;this.emitChange(r);};e.exports=new o();},null);
__d("ReactComposerTaggerActionType",["keyMirror"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();e.exports=g({SET_SELECTED_TAGGER:null,SET_TAGGERS_SOURCE:null,SET_TAGGER_SOURCE:null,SET_TAGGER_DATA:null});},null);
__d("ReactComposerTaggerStore",["ReactComposerAttachmentStore","ReactComposerAttachmentType","ReactComposerDispatcher","ReactComposerPhotoActionType","ReactComposerPhotoStore","ReactComposerPhotoUploadActionType","ReactComposerStoreBase","ReactComposerTaggerActionType","ReactComposerTaggerType","immutable","SearchableEntry","isEmpty"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){b.__markCompiled&&b.__markCompiled();for(var s in m)if(m.hasOwnProperty(s))u[s]=m[s];var t=m===null?null:m.prototype;u.prototype=Object.create(t);u.prototype.constructor=u;u.__superConstructor__=m;function u(){"use strict";m.call(this,(function(){var v={};v[o.PEOPLE]=[];v[o.LOCATION]={};v[o.BACKDATE]={};v[o.ACTIVITY]={};v[o.TARGETING]={};return {$ReactComposerTaggerStore0:p.Set(),autoFocusOnSelectedTagger:true,selectedTagger:null,taggersData:v,taggersSource:{}};}),(function(v){switch(v.type){case n.SET_SELECTED_TAGGER:this.$ReactComposerTaggerStore1(v);break;case n.SET_TAGGERS_SOURCE:this.$ReactComposerTaggerStore2(v);break;case n.SET_TAGGER_SOURCE:this.$ReactComposerTaggerStore3(v);break;case n.SET_TAGGER_DATA:this.$ReactComposerTaggerStore4(v);break;case j.PHOTO_ADD_FACEBOX:this.$ReactComposerTaggerStore5(v);break;case j.PHOTO_TAG_FACEBOX:this.$ReactComposerTaggerStore6(v);break;case j.PHOTO_UNTAG_FACEBOX:i.waitFor([k.getDispatchToken()]);this.$ReactComposerTaggerStore7(v);break;case j.PHOTO_REMOVE:i.waitFor([k.getDispatchToken()]);this.$ReactComposerTaggerStore8(v);break;case l.PHOTO_UPLOAD_DONE:this.$ReactComposerTaggerStore9(v);break;}}.bind(this)));}u.prototype.hasData=function(v,w){"use strict";var x=this.getTaggerData(v,w);if(x==null)return false;switch(w){case o.PEOPLE:return x.length>0;case o.LOCATION:return !!x.place;case o.BACKDATE:return !!x.year;case o.ACTIVITY:return !!x.action&&!!x.object;case o.TARGETING:return !r(x);default:throw new Error(w+" is an unhandled tagger type in "+"ReactComposerTaggerStore.hasData");}};u.prototype.areAllTaggersEmpty=function(v){"use strict";var w=this.getTaggersData(v);for(var x in w)if(this.hasData(v,x))return false;return true;};u.prototype.getSelectedTagger=function(v){"use strict";return this.getComposerData(v).selectedTagger;};u.prototype.getAutoFocusOnSelectedTagger=function(v){"use strict";return this.getComposerData(v).autoFocusOnSelectedTagger;};u.prototype.getTaggerSource=function(v,w){"use strict";return this.getComposerData(v).taggersSource[w];};u.prototype.getTaggerData=function(v,w){"use strict";return this.getComposerData(v).taggersData[w];};u.prototype.getTaggersData=function(v){"use strict";return this.getComposerData(v).taggersData;};u.prototype.$ReactComposerTaggerStore1=function(v){"use strict";var w=this.getComposerData(v.composerID);if(w.selectedTagger===v.taggerID&&!v.disableToggle){w.selectedTagger=null;}else w.selectedTagger=v.taggerID;w.autoFocusOnSelectedTagger=v.autoFocus;this.emitChange(v.composerID);};u.prototype.$ReactComposerTaggerStore3=function(v){"use strict";var w=this.getComposerData(v.composerID);w.taggersSource[v.taggerID]=v.taggerSource;this.emitChange(v.composerID);};u.prototype.$ReactComposerTaggerStore2=function(v){"use strict";var w=this.getComposerData(v.composerID);w.taggersSource=v.taggersSource;this.emitChange(v.composerID);};u.prototype.$ReactComposerTaggerStore4=function(v){"use strict";var w=this.getComposerData(v.composerID),x=Array.isArray(v.taggerData)?v.taggerData.slice():Object.assign({},v.taggerData);w.taggersData[v.taggerID]=x;this.emitChange(v.composerID);};u.prototype.$ReactComposerTaggerStore9=function(v){"use strict";var w=this.getComposerData(v.composerID),x=g.getIsAttachmentSelected(v.composerID,h.MEDIA);if(w.selectedTagger===null&&x){w.selectedTagger=o.PEOPLE;w.autoFocusOnSelectedTagger=false;}this.emitChange(v.composerID);};u.prototype.$ReactComposerTaggerStore5=function(v){"use strict";var w=this.validateAction(v,['composerID','facebox']),x=w[0],y=w[1],z=y.bestRecognition;if(z)this.$ReactComposerTaggerStorea(x,z.subjectID,z.value);};u.prototype.$ReactComposerTaggerStore6=function(v){"use strict";var w=this.validateAction(v,['composerID','subjectID','value']),x=w[0],y=w[1],z=w[2];this.$ReactComposerTaggerStorea(x,y,z);};u.prototype.$ReactComposerTaggerStore7=function(v){"use strict";var w=this.validateAction(v,['composerID','subjectID']),x=w[0],y=w[1];if(!k.getIsSubjectPhotoTagged(x,y))this.$ReactComposerTaggerStoreb(x,y);};u.prototype.$ReactComposerTaggerStore8=function(v){"use strict";var w=this.validateAction(v,'composerID');this.getComposerData(w).$ReactComposerTaggerStore0.forEach(function(x){if(!k.getIsSubjectPhotoTagged(w,x))this.$ReactComposerTaggerStoreb(w,x);}.bind(this));};u.prototype.$ReactComposerTaggerStorea=function(v,w,x){"use strict";var y=new q({uniqueID:w,title:x}),z=this.getComposerData(v),aa=z.taggersData[o.PEOPLE],ba=aa.some(function(ca){return ca.getUniqueID()===y.getUniqueID();});z.$ReactComposerTaggerStore0=z.$ReactComposerTaggerStore0.add(w);if(!ba)z.taggersData[o.PEOPLE]=aa.concat(y);this.emitChange(v);};u.prototype.$ReactComposerTaggerStoreb=function(v,w){"use strict";var x=this.getComposerData(v);x.taggersData[o.PEOPLE]=x.taggersData[o.PEOPLE].filter(function(y){return y.getUniqueID()!==w;});x.$ReactComposerTaggerStore0=x.$ReactComposerTaggerStore0["delete"](w);this.emitChange(v);};e.exports=new u();},null);
__d("ReactComposerAudienceSelectorContainer.react",["ReactComposerAudienceActions","ReactComposerAudienceSelector.react","ReactComposerPropsAndStoreBasedStateMixin","ReactComposerStatusStore","ReactComposerTaggerStore","ReactComposerTaggerType","Arbiter","DOM","DataStore","PrivacySelector","ReactComponentWithPureRenderMixin","React","invariant","PrivacyConst"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){b.__markCompiled&&b.__markCompiled();var t=b('PrivacyConst').EventExpansion,u=r,v=u.PropTypes,w=r.createClass({displayName:"ReactComposerAudienceSelectorContainer",mixins:[q,i(j,k)],propTypes:{audienceXHP:v.instanceOf(HTMLElement).isRequired,viewerIsTarget:v.bool},statics:{beforeCalculateInitialState:function(x,y){if(y.audienceXHP&&y.viewerIsTarget){var z,aa=y.audienceXHP,ba=p.getAdamaSelectorInstance(aa);if(ba)z=ba.getPostParam();var ca;if(!ba)ca=n.scry(aa,'select option[selected="1"]').pop();if(!ba&&!ca){var da=n.scry(aa,'input','privacyx')[0];if(da){z=da.value;}else z=aa.getAttribute('data-privacyx');}s(!!(z||ca));g.setAudience(x,z,ca?ca.value:null);g.setAudienceElement(x,y.audienceXHP);}},calculateState:function(x,y){var z=j.getMentions(x),aa=k.getTaggerData(x,l.PEOPLE)||[],ba=aa.map(function(ga){return {info:{type:ga.getType(),uid:ga.getUniqueID(),text:ga.getTitle()}};}),ca=o.get(y.audienceXHP.firstChild,'selector'),da=k.getTaggerData(x,l.ACTIVITY)||{},ea=da.eventExpansionType||t.NONE,fa={eventTag:null,withTags:ba,mention:z};if(ca&&ca.informTagsChanged){ca.informTagsChanged(fa);}else m.inform('Composer/changedtags',fa);if(ca&&ca.informEventExpansionChanged)ca.informEventExpansionChanged(ea);return {};}},render:function(){return (r.createElement(h,r.__spread({},this.props,{onChange:this._onAudienceChanged})));},_onAudienceChanged:function(x){g.setAudience(this.context.composerID,x.post_param,x.privacy_base);}});e.exports=w;},null);
__d("ReactComposerPhotoActions",["ReactComposerPhotoActionType","ReactComposerDispatcher","ReactComposerPhotoStore"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();b('ReactComposerPhotoStore');var i={startRecognizing:function(j,k){h.dispatch({composerID:j,photoID:k,type:g.PHOTO_RECOGNITION_STARTED});},finishRecognizingPhoto:function(j,k){h.dispatch({composerID:j,type:g.PHOTO_RECOGNITION_FINISHED,photoID:k});},finishRecognizing:function(j,k){h.dispatch({composerID:j,type:g.PHOTO_RECOGNITION_ALL_FINISHED,photos:k});},addFacebox:function(j,k,l){h.dispatch({composerID:j,type:g.PHOTO_ADD_FACEBOX,photoID:k,facebox:l});},tagFacebox:function(j,k,l,m,n){h.dispatch({composerID:j,type:g.PHOTO_TAG_FACEBOX,photoID:k,faceboxID:l,subjectID:m,value:n});},untagFacebox:function(j,k,l,m){h.dispatch({composerID:j,type:g.PHOTO_UNTAG_FACEBOX,photoID:k,faceboxID:l,subjectID:m});},removePhoto:function(j,k,l){h.dispatch({composerID:j,type:g.PHOTO_REMOVE,photoID:k,uploadID:l});},untagSubjectFromAllPhotos:function(j,k){h.dispatch({composerID:j,type:g.PHOTO_UNTAG_SUBJECT_FROM_ALL_PHOTOS,subjectID:k});},startPhotoEdit:function(j){h.dispatch({composerID:j,type:g.PHOTO_EDIT_STARTED});},finishPhotoEdit:function(j){h.dispatch({composerID:j,type:g.PHOTO_EDIT_FINISHED});},setPhotoBeingTagged:function(j,k){h.dispatch({composerID:j,photoID:k,type:g.PHOTO_SET_BEING_TAGGED});}};e.exports=i;},null);
__d("ReactComposerPhotoUpload",["immutable"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();e.exports=g.Record({id:null,error:{},filename:null,fileUpload:null,photoID:null,originalPhotoID:null,progress:null,state:null});},null);
__d("ReactComposerPhotoUploadState",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={PHOTO_UPLOAD_ENQUEUED:'PHOTO_UPLOAD_ENQUEUED',PHOTO_UPLOAD_RESIZE_STARTED:'PHOTO_UPLOAD_RESIZE_STARTED',PHOTO_UPLOAD_RESIZE_DONE:'PHOTO_UPLOAD_RESIZE_DONE',PHOTO_UPLOAD_RESIZE_FAILED:'PHOTO_UPLOAD_RESIZE_FAILED',PHOTO_UPLOAD_UPLOADING:'PHOTO_UPLOAD_UPLOADING',PHOTO_UPLOAD_DONE:'PHOTO_UPLOAD_DONE',PHOTO_UPLOAD_FAILED:'PHOTO_UPLOAD_FAILED'};},null);
__d("ReactComposerPhotoUploadStore",["ReactComposerPhotoActionType","ReactComposerPhotoUploadActionType","ReactComposerDispatcher","ReactComposerPhotoStore","ReactComposerPhotoUploadState","ReactComposerStoreBase","ReactComposerPhotoUpload","immutable","PhotoEditorSaveStates"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();for(var p in l)if(l.hasOwnProperty(p))r[p]=l[p];var q=l===null?null:l.prototype;r.prototype=Object.create(q);r.prototype.constructor=r;r.__superConstructor__=l;function r(){"use strict";l.call(this,(function(){return {removedIDs:n.Set(),uploads:n.List(),uploadsByID:n.Map()};}),(function(s){if(this.$ReactComposerPhotoUploadStore0(s))return;switch(s.type){case h.PHOTO_UPLOAD_ENQUEUED:this.$ReactComposerPhotoUploadStore1(s);break;case h.PHOTO_UPLOAD_RESIZE_STARTED:this.$ReactComposerPhotoUploadStore2(s);break;case h.PHOTO_UPLOAD_RESIZE_PROGRESS:this.$ReactComposerPhotoUploadStore3(s);break;case h.PHOTO_UPLOAD_RESIZE_DONE:this.$ReactComposerPhotoUploadStore4(s,k.PHOTO_UPLOAD_RESIZE_DONE);break;case h.PHOTO_UPLOAD_RESIZE_FAILED:this.$ReactComposerPhotoUploadStore4(s,k.PHOTO_UPLOAD_RESIZE_FAILED);break;case h.PHOTO_UPLOAD_UPLOADING:this.$ReactComposerPhotoUploadStore5(s);break;case h.PHOTO_UPLOAD_PROGRESS:this.$ReactComposerPhotoUploadStore3(s);break;case h.PHOTO_UPLOAD_DONE:i.waitFor([j.getDispatchToken()]);this.$ReactComposerPhotoUploadStore6(s);break;case h.PHOTO_UPLOAD_FAILED:this.$ReactComposerPhotoUploadStore7(s);break;case h.PHOTO_UPLOAD_REMOVE:case g.PHOTO_REMOVE:this.$ReactComposerPhotoUploadStore8(s);break;case h.PHOTO_UPLOAD_MOVED:this.$ReactComposerPhotoUploadStore9(s);break;default:}}.bind(this)));}r.prototype.getPhotoUpload=function(s,t){"use strict";return this.$ReactComposerPhotoUploadStorea(this.getComposerData(s),t);};r.prototype.getUploadIndex=function(s,t){"use strict";return this.$ReactComposerPhotoUploadStoreb(this.getComposerData(s),t);};r.prototype.getUploads=function(s){"use strict";return this.getComposerData(s).uploads;};r.prototype.getHasUploadBeenRemoved=function(s,t){"use strict";var u=this.getComposerData(s);return u.removedIDs.has(t);};r.prototype.isUploading=function(s){"use strict";return this.getComposerData(s).uploads.some(function(t){return t.state!==k.PHOTO_UPLOAD_RESIZE_FAILED&&t.state!==k.PHOTO_UPLOAD_DONE&&t.state!==k.PHOTO_UPLOAD_FAILED;});};r.prototype.getTotalNumberOfStickersOnPhotos=function(s){"use strict";var t=0;this.getComposerData(s).uploads.forEach(function(u){var v=u.get('originalPhotoID');if(v)t+=o.getTotalNumOfStickersOnPhoto(v);});return t;};r.prototype.$ReactComposerPhotoUploadStore1=function(s){"use strict";var t=this.validateAction(s,['composerID','uploadID','filename','index']),u=t[0],v=t[1],w=t[2],x=t[3],y=this.getComposerData(u);y.uploads=y.uploads.splice(x,0,new m({id:v,state:k.PHOTO_UPLOAD_ENQUEUED,filename:w}));for(var z=x;z<y.uploads.size;z++){var aa=y.uploads.get(z).id;y.uploadsByID=y.uploadsByID.set(aa,z);}this.emitChange(u);};r.prototype.$ReactComposerPhotoUploadStore2=function(s){"use strict";var t=this.validateAction(s,['composerID','uploadID']),u=t[0],v=t[1],w=this.getComposerData(u);this.$ReactComposerPhotoUploadStorec(w,v,function(x){return x.withMutations(function(y){return y.set('state',k.PHOTO_UPLOAD_RESIZE_STARTED).set('progress',0);});});this.emitChange(u);};r.prototype.$ReactComposerPhotoUploadStore5=function(s){"use strict";var t=this.validateAction(s,['composerID','uploadID','fileUpload']),u=t[0],v=t[1],w=t[2],x=this.getComposerData(u);this.$ReactComposerPhotoUploadStorec(x,v,function(y){return y.withMutations(function(z){return z.set('state',k.PHOTO_UPLOAD_UPLOADING).set('progress',0).set('fileUpload',w);});});this.emitChange(u);};r.prototype.$ReactComposerPhotoUploadStore3=function(s){"use strict";var t=this.validateAction(s,['composerID','uploadID','progress']),u=t[0],v=t[1],w=t[2],x=this.getComposerData(u);this.$ReactComposerPhotoUploadStorec(x,v,function(y){return y.set('progress',w);});this.emitChange(u);};r.prototype.$ReactComposerPhotoUploadStore6=function(s){"use strict";var t=this.validateAction(s,['composerID','uploadID','photoID']),u=t[0],v=t[1],w=t[2],x=this.getComposerData(u);this.$ReactComposerPhotoUploadStorec(x,v,function(y){return y.withMutations(function(z){return z.set('state',k.PHOTO_UPLOAD_DONE).set('photoID',w).set('originalPhotoID',s.originalPhotoID||w).remove('fileUpload');});});this.emitChange(u);};r.prototype.$ReactComposerPhotoUploadStore7=function(s){"use strict";var t=this.validateAction(s,['composerID','uploadID']),u=t[0],v=t[1],w=this.getComposerData(u);this.$ReactComposerPhotoUploadStorec(w,v,function(x){return x.withMutations(function(y){return y.set('state',k.PHOTO_UPLOAD_FAILED).set('error',s.error);});});this.emitChange(u);};r.prototype.$ReactComposerPhotoUploadStore8=function(s){"use strict";var t=this.validateAction(s,['composerID','uploadID']),u=t[0],v=t[1],w=this.getComposerData(u),x=this.$ReactComposerPhotoUploadStoreb(w,v);w.uploads=w.uploads["delete"](x);w.uploadsByID=w.uploadsByID["delete"](v);for(var y=x;y<w.uploads.size;y++){var z=w.uploads.get(y).id;w.uploadsByID=w.uploadsByID.set(z,y);}w.removedIDs=w.removedIDs.add(v);this.emitChange(u);};r.prototype.$ReactComposerPhotoUploadStore4=function(s,t){"use strict";var u=this.validateAction(s,['composerID','uploadID']),v=u[0],w=u[1];this.$ReactComposerPhotoUploadStored(v,w,t);this.emitChange(v);};r.prototype.$ReactComposerPhotoUploadStore9=function(s){"use strict";var t=this.validateAction(s,['composerID','from','to']),u=t[0],v=t[1],w=t[2],x=this.getComposerData(u);x.uploads=x.uploads.splice(v,1).splice(w,0,x.uploads.get(v));x.uploadsByID=x.uploads.groupBy(function(y,z){return z;}).toMap().map(function(y){return y.first().id;}).flip();this.emitChange(u);};r.prototype.$ReactComposerPhotoUploadStored=function(s,t,u){"use strict";var v=this.getComposerData(s);this.$ReactComposerPhotoUploadStorec(v,t,function(w){return w.set('state',u);});};r.prototype.$ReactComposerPhotoUploadStorec=function(s,t,u){"use strict";var v=this.$ReactComposerPhotoUploadStoref(s,t),w=v[0],x=v[1];s.uploads=s.uploads.set(x,u(w,x));};r.prototype.$ReactComposerPhotoUploadStoref=function(s,t){"use strict";var u=this.$ReactComposerPhotoUploadStoreb(s,t);return [s.uploads.get(u),u];};r.prototype.$ReactComposerPhotoUploadStoreb=function(s,t){"use strict";var u=s.uploadsByID.get(t);if(u===(void 0))throw 'Upload '+t+' hasn\'t been registered';return u;};r.prototype.$ReactComposerPhotoUploadStorea=function(s,t){"use strict";var u=this.$ReactComposerPhotoUploadStoreb(s,t);return s.uploads.get(u);};r.prototype.$ReactComposerPhotoUploadStore0=function(s){"use strict";if(!!h[s.type]){var t=s.composerID,u=s.uploadID;if(u==null)return false;return this.getHasUploadBeenRemoved(t,u);}return false;};e.exports=new r();},null);
__d("ReactComposerVideoUploadActionType",["keyMirror"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();e.exports=g({VIDEO_SET_UPLOADER:null,VIDEO_UPLOAD_ADD:null,VIDEO_UPLOAD_REMOVE:null});},null);
__d("ReactComposerVideoUploadStore",["ReactComposerStoreBase","ReactComposerVideoUploadActionType","immutable"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j=i.Record({file:null});for(var k in g)if(g.hasOwnProperty(k))m[k]=g[k];var l=g===null?null:g.prototype;m.prototype=Object.create(l);m.prototype.constructor=m;m.__superConstructor__=g;function m(){"use strict";g.call(this,(function(){return {uploader:null,video:null};}),(function(n){switch(n.type){case h.VIDEO_SET_UPLOADER:this.$ReactComposerVideoUploadStore0(n);break;case h.VIDEO_UPLOAD_ADD:this.$ReactComposerVideoUploadStore1(n);break;case h.VIDEO_UPLOAD_REMOVE:this.$ReactComposerVideoUploadStore2(n);break;default:}}.bind(this)));}m.prototype.getUploader=function(n){"use strict";return this.getComposerData(n).uploader;};m.prototype.getVideo=function(n){"use strict";return this.getComposerData(n).video;};m.prototype.$ReactComposerVideoUploadStore0=function(n){"use strict";var o=this.validateAction(n,['composerID','uploader']),p=o[0],q=o[1],r=this.getComposerData(p);r.uploader=q;this.emitChange(p);};m.prototype.$ReactComposerVideoUploadStore1=function(n){"use strict";var o=this.validateAction(n,['composerID','file']),p=o[0],q=o[1],r=this.getComposerData(p);r.video=new j({file:q});this.emitChange(p);};m.prototype.$ReactComposerVideoUploadStore2=function(n){"use strict";var o=this.validateAction(n,'composerID'),p=this.getComposerData(o);p.video=null;p.input&&p.input.clear();this.emitChange(o);};e.exports=new m();},null);
__d("ReactComposerStatusActions",["ReactComposerStatusActionType","ReactComposerDispatcher","ReactComposerStatusStore"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();b('ReactComposerStatusStore');function i(){"use strict";}i.prototype.setMentionsSource=function(j,k){"use strict";var l={composerID:j,type:g.SET_MENTIONS_SOURCE,mentionsSource:k};h.dispatch(l);};i.prototype.setTypeaheadReporter=function(j,k){"use strict";var l={composerID:j,type:g.SET_TYPEAHEAD_REPORTER,typeaheadReporter:k};h.dispatch(l);};i.prototype.setEditorState=function(j,k){"use strict";var l={composerID:j,type:g.SET_EDITOR_STATE,editorState:k};h.dispatch(l);};i.prototype.setMentions=function(j,k){"use strict";var l={composerID:j,type:g.SET_MENTIONS,mentions:k};h.dispatch(l);};i.prototype.setHasText=function(j,k){"use strict";h.dispatch({composerID:j,type:g.SET_HAS_TEXT,hasText:k});};e.exports=new i();},null);
__d("ReactComposerStatusAttachmentMentionsInput.react",["ReactComposerConfig","ReactComposerContextMixin","ReactComposerEvents","ReactComposerTaggerType","Arbiter","Keys","MentionsInput.react","ReactComponentWithPureRenderMixin","React","SubscriptionsHandler","UserAgent_DEPRECATED","XUITypeaheadView.react","cx","createEmptyEditorState","getMentionsInputDecorator","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){b.__markCompiled&&b.__markCompiled();var w=o,x=w.PropTypes,y=o.createClass({displayName:"ReactComposerStatusAttachmentMentionsInput",_subscriptions:(undefined),mixins:[n,h],propTypes:{config:g,mentionsSource:x.object,typeaheadReporter:x.object,onChange:x.func,onFocus:x.func,onPasteFiles:x.func,onPostIntent:x.func},getInitialState:function(){return {editorState:this.props.editorState};},componentWillUnmount:function(){this.props.onBlur&&this.props.onBlur(this.state.editorState);this._subscriptions&&this._subscriptions.release();},componentWillMount:function(){var z=new p();z.addSubscriptions(k.subscribe([i.SELECT_ATTACHMENT,i.FOCUS],function(aa,ba){if(ba.composerID===this.context.composerID)this.focus();}.bind(this)));this._subscriptions=z;},componentWillReceiveProps:function(z){if(z.editorState===null)this.setState({editorState:t(u())});},render:function(){var z=this.props.config&&this.props.config.taggersConfig[j.PEOPLE],aa=z&&z.typeaheadView?z.typeaheadView:r,ba=z&&z.typeaheadViewProps?z.typeaheadViewProps:{},ca=Object.assign({},{typeaheadView:aa,typeaheadViewProps:ba,selectOnTab:false,spellCheck:true},this.props,{className:v("_1mwp",this.props.className),editorState:this.state.editorState,handleContentReturn:this._handleContentReturn,handlePastedFiles:this._handlePastedFiles,onAddMention:this._onAddMention,onShowMentions:this._onShowMentions,onFocus:this._onFocus,onBlur:this._onBlur,onChange:this._onChange,maxResults:10});return (o.createElement(m,o.__spread({ref:"mentionsInput"},ca)));},focus:function(){this.refs.mentionsInput.focus();},_onAddMention:function(z,aa,ba){var ca=this.props.typeaheadReporter;if(ca){ca.reportSelect(z.getUniqueID(),z.getType(),aa,ba.button>=0);ca.sessionEnd();ca.sessionStart();}},_onShowMentions:function(z,aa){var ba=this.props.typeaheadReporter;if(ba)ba.reportResults(z.map(function(ca){return ca.getUniqueID();}));},_onFocus:function(){var z=this.props.typeaheadReporter;if(z)z.sessionStart();this.props.onFocus&&this.props.onFocus();},_handlePastedFiles:function(z){var aa=/^image\//;z=z.filter(function(ba){return aa.test(ba.type);});if(z.length>0){this.props.onPasteFiles&&this.props.onPasteFiles(z);return true;}return false;},_handleContentReturn:function(event){var z=q.osx()?event.metaKey:event.controlKey;if(event.keyCode===l.RETURN&&z){this.refs.mentionsInput.blur();setTimeout(this.props.onPostIntent,0);return true;}return false;},_onChange:function(z){this.setState({editorState:z});this.props.onChange&&this.props.onChange(z);},_onBlur:function(){this.props.typeaheadReporter&&this.props.typeaheadReporter.sessionEnd();this.props.onBlur&&this.props.onBlur(this.state.editorState);}});e.exports=y;},null);
__d("ReactComposerScrapedAttachmentActionType",["keyMirror"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();e.exports=g({ATTACHMENT_SCRAPE_ENABLED:null,ATTACHMENT_PERMISSIVE_MATCH_SETTED:null,ATTACHMENT_SCRAPE_INTENDED:null,ATTACHMENT_SCRAPED:null});},null);
__d("XReactComposerScrapedAttachmentController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/react_composer\/scraper\/",{composer_id:{type:"String",required:true},target_id:{type:"String",required:true},scrape_url:{type:"String",required:true},is_finch:{type:"Bool",defaultValue:false}});},null);
__d("ReactComposerScrapedAttachmentStore",["ReactComposerAttachmentActionType","ReactComposerAttachmentType","ReactComposerScrapedAttachmentActionType","ReactComposerStoreBase","XReactComposerScrapedAttachmentController","AsyncRequest","DOM"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();for(var n in j)if(j.hasOwnProperty(n))p[n]=j[n];var o=j===null?null:j.prototype;p.prototype=Object.create(o);p.prototype.constructor=p;p.__superConstructor__=j;function p(){"use strict";j.call(this,(function(){return {markup:null,attachmentConfig:{},enabled:false,isScraping:false,permissiveMatch:null};}),(function(q){switch(q.type){case i.ATTACHMENT_SCRAPE_ENABLED:this.$ReactComposerScrapedAttachmentStore0(q);break;case i.ATTACHMENT_PERMISSIVE_MATCH_SETTED:this.$ReactComposerScrapedAttachmentStore1(q);break;case i.ATTACHMENT_SCRAPE_INTENDED:this.$ReactComposerScrapedAttachmentStore2(q);break;case i.ATTACHMENT_SCRAPED:this.$ReactComposerScrapedAttachmentStore3(q);break;case g.SELECT_ATTACHMENT:this.$ReactComposerScrapedAttachmentStore4(q);break;}}.bind(this)));}p.prototype.isEnabled=function(q){"use strict";return this.getComposerData(q).isEnabled;};p.prototype.hasAttachment=function(q){"use strict";return !!this.getMarkup(q);};p.prototype.isScraping=function(q){"use strict";return this.getComposerData(q).isScraping;};p.prototype.getMarkup=function(q){"use strict";return this.getComposerData(q).markup;};p.prototype.getAttachmentConfig=function(q){"use strict";var r=this.getComposerData(q);if(!r.markup)return null;var s=m.scry(r.markup,'input[name="attachment[params][images][0]"]').pop(),t=m.scry(r.markup,'input[name="attachment[params][title]"]').pop(),u=m.scry(r.markup,'input[name="attachment[params][summary]"]').pop();if(s!=null)r.attachmentConfig.params.images[0]=s.value;if(t!=null)r.attachmentConfig.params.title=t.value;if(u!=null)r.attachmentConfig.params.summary=u.value;return r.attachmentConfig;};p.prototype.getPermissiveMatch=function(q){"use strict";return this.getComposerData(q).permissiveMatch;};p.prototype.$ReactComposerScrapedAttachmentStore0=function(q){"use strict";var r=this.validateAction(q,['composerID','enabled']),s=r[0],t=r[1],u=this.getComposerData(s);u.isEnabled=t;};p.prototype.$ReactComposerScrapedAttachmentStore1=function(q){"use strict";var r=this.validateAction(q,['composerID','permissiveMatch']),s=r[0],t=r[1],u=this.getComposerData(s);u.permissiveMatch=t;this.emitChange(q.composerID);};p.prototype.$ReactComposerScrapedAttachmentStore2=function(q){"use strict";var r=this.validateAction(q,['composerID','targetID','value']),s=r[0],t=r[1],u=r[2];if(!this.isEnabled(s))return;var v=this.getComposerData(q.composerID);v.isScraping=true;var w=k.getURIBuilder().setString('composer_id',s).setString('target_id',t).setString('scrape_url',u).getURI();new l(w).send();this.emitChange(q.composerID);};p.prototype.$ReactComposerScrapedAttachmentStore3=function(q){"use strict";if(!this.isEnabled(q.composerID))return;var r=this.getComposerData(q.composerID);r.markup=q.markup;r.attachmentConfig=q.attachmentConfig;r.isScraping=false;this.emitChange(q.composerID);};p.prototype.$ReactComposerScrapedAttachmentStore4=function(q){"use strict";if(q.id===h.STATUS)return;var r=this.getComposerData(q.composerID);r.markup=null;r.attachmentConfig={};r.isScraping=false;this.emitChange(q.composerID);};e.exports=new p();},null);
__d("ReactComposerHandleUnsavedChanges",["ReactComposerAttachmentStore","ReactComposerAttachmentType","ReactComposerPhotoStore","ReactComposerPhotoUploadStore","ReactComposerScrapedAttachmentStore","ReactComposerStatusStore","ReactComposerStore","ReactComposerTaggerStore","ReactComposerVideoUploadStore","PageTransitions","Run","URI","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){b.__markCompiled&&b.__markCompiled();var t={handler:function(u,v){var w=p.getMostRecentURI(),x=r.getNextURI(),y=w.getQueryData().hasOwnProperty('theater')&&v.path===x.path,z=x.getQueryData().hasOwnProperty('theater');if(z||y)q.onAfterLoad(function(){return q.onBeforeUnload(function(){return t.handler(u,v);});});if(z||y||m.hasPostSucceeded(u)||m.isPublishing(u))return;var aa=t.hasUnsavedChanges(u);if(aa&&!(a.Dialog&&a.Dialog.getCurrent()))return s._("You haven't finished your post yet. Do you want to leave without finishing?");},hasUnsavedChanges:function(u){var v=g.getIsAttachmentSelected(u,h.MEDIA),w=l.hasText(u),x=v&&(j.isUploading(u)||i.isRecognizing(u)||i.getPhotos(u).size>0),y=v&&o.getVideo(u),z=!n.areAllTaggersEmpty(u),aa=k.hasAttachment(u),ba=w||x||y||z||aa;return !!ba;}};e.exports=t;},null);
__d("ReactComposerStatusAttachmentMentionsInputContainer.react",["Arbiter","ReactComposerActions","ReactComposerAttachmentStore","ReactComposerAttachmentType","ReactComposerConfig","ReactComposerContextMixin","ReactComposerEvents","ReactComposerPropsAndStoreBasedStateMixin","ReactComposerStatusActions","ReactComposerStatusAttachmentMentionsInput.react","ReactComposerStatusStore","ReactComposerStore","EditorState","LitestandStoryInsertionStatus","ReactComponentWithPureRenderMixin","ReactComposerHandleUnsavedChanges","React","XUIError.react","createEmptyEditorState","cx","errorCode","getMentionsInputDecorator"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba){b.__markCompiled&&b.__markCompiled();var ca=w,da=ca.PropTypes,ea=w.createClass({displayName:"ComposerStatusAttachmentMentionsInputContainer",mixins:[u,l,n(i,q,r)],propTypes:{config:k,editorState:da.instanceOf(s),mentionsEnabled:da.bool,mentionsSource:da.object,onChange:da.func,onFocus:da.func,onPasteFiles:da.func,onPasteRawText:da.func},getDefaultProps:function(){return {mentionsEnabled:true};},getInitialState:function(){return {isFocused:false};},statics:{beforeCalculateInitialState:function(fa,ga){if(ga.mentionsSource)o.setMentionsSource(fa,ga.mentionsSource);if(ga.editorState)o.setEditorState(fa,ga.editorState);},calculateState:function(fa,ga){var ha=q.getEditorState(fa),ia;if(ha){var ja=ga.mentionsEnabled?ba():null;if(ha.getDecorator()!==ja){ia=s.set(ha,{decorator:ja});}else ia=ha;}else ia=y(ja);o.setEditorState(fa,ia);return {editorState:ia,mentionsSource:ga.mentionsEnabled?q.getMentionsSource(fa):null,typeaheadReporter:q.getTypeaheadReporter(fa),serverErrorResponse:r.getServerErrorResponse(fa),isSelectedAttachmentActive:i.isSelectedAttachmentActive(fa)};}},componentWillReceiveProps:function(fa){if(this.props.mentionsSource!==fa.mentionsSource)o.setMentionsSource(this.context.composerID,fa.mentionsSource);if(fa.editorState===null)o.setEditorState(this.context.composerID,y(ba()));},componentDidUpdate:function(fa,ga){if(!ga.serverErrorResponse&&this._isEmptyStatusError(this.state.serverErrorResponse))this.focus();},componentWillMount:function(){this._storyInsertionBlocker=t.registerBlocker(function(){return v.hasUnsavedChanges(this.context.composerID)||this.state.isFocused;}.bind(this));},componentWillUnmount:function(){this._storyInsertionBlocker&&this._storyInsertionBlocker.unsubscribe();this._storyInsertionBlocker=null;},render:function(){var fa=this.props.config&&this.props.config.attachmentsConfig[j.STATUS],ga=this.state.serverErrorResponse,ha=w.createElement(p,w.__spread({},this.props,{className:((this.state.isSelectedAttachmentActive?"_1mwq":'')+(this.props.config&&this.props.config.showExpandedComposer?' '+"_4c_p":'')+(fa&&fa.showProfilePic?' '+"_5bu_":'')),ref:"mentionsInput",editorState:this.state.editorState,mentionsSource:this.state.mentionsSource,typeaheadReporter:this.state.typeaheadReporter,onBlur:this._onBlur,onChange:this._onChange,onFocus:this._onFocus,onPostIntent:this._onPostIntent}));if(this._isEmptyStatusError(ga))ha=w.createElement(x,{xuiError:ga.getErrorDescription(),xuiErrorPosition:"below",xuiErrorAlignh:"left"},ha);return ha;},focus:function(){this.refs.mentionsInput.focus();},_onFocus:function(){g.inform(m.MENTION_INPUT_FOCUS,{composerID:this.context.composerID});this.setState({isFocused:true});this.props.onFocus&&this.props.onFocus();},_onChange:function(fa){var ga=false;if(fa){var ha=fa.getCurrentContent();ga=ha?ha.hasText():false;}if(q.hasText(this.context.composerID)!==ga)o.setHasText(this.context.composerID,ga);this.props.onChange&&this.props.onChange(fa);},_onBlur:function(fa){o.setEditorState(this.context.composerID,fa);this.setState({isFocused:false});},_onPostIntent:function(){h.postIntended(this.context.composerID,{actorID:this.context.actorID,config:this.props.config,targetID:this.context.targetID});},_isEmptyStatusError:function(fa){return !!(fa&&fa.getError()==1455004);}});e.exports=ea;},null);
__d("ReactComposerMinutiaeAttachmentActionType",["keyMirror"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();e.exports=g({FETCH_ATTACHMENT:null,SET_MARKUP:null});},null);
__d("XReactComposerMinutiaeAttachmentController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/react_composer\/minutiae\/attachment\/",{composer_id:{type:"String",required:true},action_id:{type:"String",required:true},object_id:{type:"String",required:true},target_id:{type:"String",required:true},is_timeline:{type:"Bool",defaultValue:false}});},null);
__d("ReactComposerMinutiaeAttachmentStore",["ReactComposerAttachmentActionType","ReactComposerAttachmentType","ReactComposerMinutiaeAttachmentActionType","ReactComposerStoreBase","XReactComposerMinutiaeAttachmentController","AsyncRequest"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();for(var m in j)if(j.hasOwnProperty(m))o[m]=j[m];var n=j===null?null:j.prototype;o.prototype=Object.create(n);o.prototype.constructor=o;o.__superConstructor__=j;function o(){"use strict";j.call(this,(function(){return {isFetching:false,markup:null,pendingRequest:null};}),(function(p){switch(p.type){case i.FETCH_ATTACHMENT:this.$ReactComposerMinutiaeAttachmentStore0(p);break;case i.SET_MARKUP:this.$ReactComposerMinutiaeAttachmentStore1(p);break;case g.SELECT_ATTACHMENT:this.$ReactComposerMinutiaeAttachmentStore2(p);break;}}.bind(this)));}o.prototype.getMarkup=function(p){"use strict";return this.getComposerData(p).markup;};o.prototype.isFetching=function(p){"use strict";return this.getComposerData(p).isFetching;};o.prototype.$ReactComposerMinutiaeAttachmentStore0=function(p){"use strict";var q=this.validateAction(p,['composerID','actionID','objectID','targetID','isTimeline']),r=q[0],s=q[1],t=q[2],u=q[3],v=q[4],w=this.getComposerData(r);w.isFetching=true;var x=k.getURIBuilder().setString('composer_id',r).setString('action_id',s).setString('object_id',t).setString('target_id',u).setBool('is_timeline',v).getURI();w.pendingRequest=(new l(x)).setFinallyHandler(function(){w.isFetching=false;w.pendingRequest=null;this.emitChange(r);}.bind(this));w.pendingRequest.send();this.emitChange(r);};o.prototype.$ReactComposerMinutiaeAttachmentStore1=function(p){"use strict";var q=this.validateAction(p,['composerID','markup']),r=q[0],s=q[1],t=this.getComposerData(r);t.markup=s;this.emitChange(r);};o.prototype.$ReactComposerMinutiaeAttachmentStore2=function(p){"use strict";var q=this.validateAction(p,['composerID','id']),r=q[0],s=q[1];if(s===h.STATUS)return;var t=this.getComposerData(r);t.markup=null;t.isFetching=false;t.pendingRequest&&t.pendingRequest.abandon();this.emitChange(r);};e.exports=new o();},null);
__d("ReactComposerMinutiaeAttachmentActions",["ReactComposerMinutiaeAttachmentActionType","ReactComposerDispatcher","ReactComposerMinutiaeAttachmentStore"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();b('ReactComposerMinutiaeAttachmentStore');function i(){"use strict";}i.prototype.fetchMinutiaeAttachment=function(j,k,l,m,n){"use strict";var o={composerID:j,type:g.FETCH_ATTACHMENT,actionID:k,objectID:l,targetID:m,isTimeline:n};h.dispatch(o);};i.prototype.setMarkup=function(j,k){"use strict";var l={composerID:j,type:g.SET_MARKUP,markup:k};h.dispatch(l);};e.exports=new i();},null);
__d("ReactComposerTaggerActions",["ReactComposerTaggerActionType","ReactComposerDispatcher","ReactComposerTaggerStore"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();b('ReactComposerTaggerStore');function i(){"use strict";}i.prototype.selectTagger=function(j,k,l){"use strict";var m={composerID:j,type:g.SET_SELECTED_TAGGER,taggerID:k,autoFocus:true,disableToggle:l};h.dispatch(m);};i.prototype.selectTaggerWithoutAutofocus=function(j,k){"use strict";var l={composerID:j,type:g.SET_SELECTED_TAGGER,taggerID:k,autoFocus:false};h.dispatch(l);};i.prototype.setTaggersSource=function(j,k){"use strict";var l={composerID:j,type:g.SET_TAGGERS_SOURCE,taggersSource:k};h.dispatch(l);};i.prototype.setTaggerSource=function(j,k,l){"use strict";var m={composerID:j,type:g.SET_TAGGER_SOURCE,taggerID:k,taggerSource:l};h.dispatch(m);};i.prototype.setTaggerData=function(j,k,l){"use strict";var m={composerID:j,type:g.SET_TAGGER_DATA,taggerID:k,taggerData:l};h.dispatch(m);};i.prototype.selectDateTime=function(j,k){"use strict";var l={composerID:j,type:g.SET_SELECTED_DATETIME,selectedDateTime:k};h.dispatch(l);};i.prototype.selectPeople=function(j,k){"use strict";var l={composerID:j,type:g.SET_SELECTED_PEOPLE,selectedPeople:k};h.dispatch(l);};e.exports=new i();},null);
__d("ReactComposerTaggerButton.react",["TooltipLink.react","React","cx","emptyFunction","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l=h,m=l.PropTypes,n=h.createClass({displayName:"ReactComposerTaggerButton",propTypes:{taggerID:m.string.isRequired,title:m.string,tooltip:m.string,selected:m.bool,hasData:m.bool,onSelect:m.func},getDefaultProps:function(){return {title:null,tooltip:null,selected:false,hasData:false,onSelect:j};},render:function(){var o=k((("_3xem")+(this.props.selected?' '+"_50hx":''))),p=k((("_3xen")+(this.props.hasData?' '+"_4pd":'')),this.props.className);return (h.createElement(g,{onClick:this._onSelect,tooltip:this.props.tooltip,className:o,"aria-label":this.props.tooltip,tabIndex:"0",role:"button"},h.createElement("span",{className:"accessible_elem"},this.props.title),h.createElement("div",{className:p}),this.props.children));},_onSelect:function(){this.props.onSelect&&this.props.onSelect(this.props.taggerID);}});e.exports=n;},null);
__d("ReactComposerTaggerButtonMixin",["ReactComposerPropsAndStoreBasedStateMixin","ReactComposerTaggerActions","ReactComposerTaggerButton.react","ReactComposerTaggerStore","React","invariant"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();var m={mixins:[g(j)],statics:{calculateState:function(n,o){var p=j.getSelectedTagger(n);return {selected:p===this.taggerID,hasData:j.hasData(n,this.taggerID)};}},componentWillMount:function(){l(this.constructor.taggerID);},render:function(){return (k.createElement(i,k.__spread({taggerID:this.constructor.taggerID,title:this.getTitle(),tooltip:this.getTooltip(),className:this.getClassName(),onSelect:this._onSelect},this.state),this.props.children));},_onSelect:function(){this._onSelectX&&this._onSelectX();h.selectTagger(this.context.composerID,this.constructor.taggerID,this.constructor.disableToggle);}};e.exports=m;},null);
__d("ReactComposerTaggerButtons.react",["ReactComponentWithPureRenderMixin","React","cx"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j=h.createClass({displayName:"ReactComposerTaggerButtons",mixins:[g],render:function(){return (h.createElement("div",{className:"_47gt"},this.props.children));}});e.exports=j;},null);
__d("ReactComposerTaggerContainerStateMixin",["ReactComposerPropsAndStoreBasedStateMixin","ReactComposerTaggerActions","ReactComposerTaggerStore","invariant","isEmpty"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l={mixins:[g(i)],statics:{beforeCalculateInitialState:function(m,n){if(n.taggerData){var o=i.getTaggerData(m,this.taggerID);if(k(o))h.setTaggerData(m,this.taggerID,n.taggerData);}if(n.taggerSource)h.setTaggerSource(m,this.taggerID,n.taggerSource);},calculateState:function(m,n){var o=i.getSelectedTagger(m),p=i.getAutoFocusOnSelectedTagger(m),q=i.getTaggerData(m,this.taggerID),r=i.getTaggerSource(m,this.taggerID),s=o===this.taggerID;return {autoFocus:p,isSelected:s,taggerData:q,taggerSource:r};}},componentWillMount:function(){j(this.constructor.taggerID);}};e.exports=l;},null);
__d("ReactComposerTaggerContainerMixin",["ReactComposerTaggerActions","ReactComposerTaggerContainerStateMixin","React","invariant"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();var k={mixins:[h],componentWillMount:function(){j(this.constructor.taggerComponent);},render:function(){if(!this.state.isSelected)return i.createElement("noscript",null);var l=this.constructor.taggerComponent;return (i.createElement(l,i.__spread({},this.props,{autoFocus:this.state.autoFocus,taggerSource:this.state.taggerSource,taggerData:this.state.taggerData,onSelect:this._onTaggerDataChanged})));},_onTaggerDataChanged:function(l){this.__onTaggerDataChanged&&this.__onTaggerDataChanged(l);g.setTaggerData(this.context.composerID,this.constructor.taggerID,l);this.props.onSelect&&this.props.onSelect(l);}};e.exports=k;},null);
__d("ShareDialogTagSummary.react",["Arbiter","AsyncRequest","immutable","Parent","ReactComponentWithPureRenderMixin","React","cx","emptyFunction","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();var p=l,q=p.PropTypes,r=true,s=l.createClass({displayName:"ShareDialogTagSummary",mixins:[k],_ogSubscription:(undefined),_socialTextRequest:(undefined),propTypes:{ogObjectClick:q.func.isRequired,onTagSummaryClick:q.func.isRequired,peopleToExclude:q.instanceOf(i.Set).isRequired,placeTokenClick:q.func.isRequired,taggerData:q.instanceOf(i.Map).isRequired,withTokenClick:q.func.isRequired},getDefaultProps:function(){return {peopleToExclude:i.Set(),ogObjectClick:n,onTagSummaryClick:n,placeTokenClick:n,withTokenClick:n};},getInitialState:function(){return {socialText:null};},componentWillMount:function(){this._ogSubscription=g.subscribe('composer/ogIconPickerOpened',function(event,t){r=false;});this._sendSocialTextRequest(this.props);},componentWillUnmount:function(){if(this._socialTextRequest)this._socialTextRequest.abort();},componentWillReceiveProps:function(t){if(!this.props.taggerData.equals(t.taggerData))this._sendSocialTextRequest(t);},_handleSocialText:function(t){this.setState({socialText:t.getPayload().rendered});},render:function(){var t=o(this.props.className,"_3qg0");return (l.createElement("div",{className:t,onMouseDown:this._onMouseDown,dangerouslySetInnerHTML:this.state.socialText}));},_onMouseDown:function(t){var u=t.target;if(j.byClass(u,'withToken')){this.props.withTokenClick();}else if(j.byClass(u,'placeToken')){this.props.placeTokenClick();}else if(j.byClass(u,'og_composer_object')){this.props.ogObjectClick();}else if(!(j.byClass(u,'ogPickerIcon')))this.props.onTagSummaryClick();},_sendSocialTextRequest:function(t){if(this._socialTextRequest)this._socialTextRequest.abort();var u=t.taggerData,v=u.get('people'),w=u.get('place'),x=u.get('action'),y=u.get('actionIconID'),z=u.get('object'),aa=v.filter(function(ea){return !this.props.peopleToExclude.has(ea.getUniqueID());}.bind(this));if(!(aa&&aa.length>0)&&!w&&!(x&&z)){if(this.state.socialText)this.setState({socialText:null});return;}var ba={};if(aa)ba.people=aa.map(function(ea){return ea.getUniqueID();});if(w)ba.place=w.getTitle();if(x&&z){ba.actionID=x.getUniqueID();var ca=z.getUniqueID(),da=z.getTitle();if(!ca||ca===da){ba.objectStr=da;}else ba.objectID=ca;}if(y)ba.actionIconID=y;ba.iconPickerOpened=r!==true;this._socialTextRequest=new h();this._socialTextRequest&&this._socialTextRequest.setURI('/ajax/metacomposer/social_text.php').setData(ba).setHandler(this._handleSocialText).send();}});e.exports=s;},null);
__d("ReactComposerTaggerSummaryContainer.react",["ReactComposerContextMixin","ReactComposerTaggerActions","ReactComposerTaggerStore","ReactComposerTaggerType","ReactComposerPropsAndStoreBasedStateMixin","ShareDialogTagSummary.react","Arbiter","immutable","React","containsNode"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){b.__markCompiled&&b.__markCompiled();var q=o.createClass({displayName:"ReactComposerTaggerSummaryContainer",_ogSubscription:((void 0)),mixins:[g,k(i)],statics:{calculateState:function(r,s){var t=i.getTaggersData(r),u=t[j.PEOPLE],v=t[j.LOCATION],w=t[j.ACTIVITY],x=v?v.place:null;return {people:u,place:x,activity:w};}},componentWillMount:function(){this._ogSubscription=m.subscribe('composer/ogCustomIconSelected',function(event,r){if(!p(o.findDOMNode(this.refs.taggerSummary),r.triggerElement))return;var s=i.getTaggerData(this.context.composerID,j.ACTIVITY)||{};s.actionIconID=r.icon_id;h.setTaggerData(this.context.composerID,j.ACTIVITY,s);}.bind(this));},componentWillUnmount:function(){if(this._ogSubscription){this._ogSubscription.unsubscribe&&this._ogSubscription.unsubscribe();this._ogSubscription=null;}},render:function(){return (o.createElement(l,{ogObjectClick:this._ogObjectClick,onTagSummaryClick:this._onTagSummaryClick,peopleToExclude:n.Set([this.context.actorID]),placeTokenClick:this._placeTokenClick,ref:"taggerSummary",taggerData:n.Map({action:this.state.activity.action,actionIconID:this.state.activity.actionIconID,object:this.state.activity.object,people:this.state.people,place:this.state.place}),withTokenClick:this._withTokenClick}));},_withTokenClick:function(){h.selectTagger(this.context.composerID,j.PEOPLE);},_placeTokenClick:function(){h.selectTagger(this.context.composerID,j.LOCATION);},_ogObjectClick:function(){h.selectTagger(this.context.composerID,j.ACTIVITY);},_onTagSummaryClick:function(){h.selectTagger(this.context.composerID,null);}});e.exports=q;},null);
__d("ReactComposerTaggerViewStyles",["React"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h=320,i=210,j=40,k=g,l=k.PropTypes,m={useScrollableArea:l.bool.isRequired,itemHeight:l.number,maxHeight:l.number};e.exports={DEFAULT:{useScrollableArea:false},SCROLLABLE:{useScrollableArea:true,itemHeight:j,maxHeight:h},SCROLLABLE_SHORT:{useScrollableArea:true,itemHeight:j,maxHeight:i},Shape:m};},null);
__d("ReactComposerTaggers.react",["React","cx"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();var i=g.createClass({displayName:"ReactComposerTaggers",render:function(){return (g.createElement("div",{className:"_5f24"},this.props.children));}});e.exports=i;},null);
__d("ReactComposerTaggerViewMixin",["ReactComposerTaggerViewStyles","React","ScrollableArea.react","ScrollableArea","TypeaheadViewPropTypes","setImmediate","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();var n=h,o=n.PropTypes,p={propTypes:Object.assign({customIcon:o.object,taggerViewStyle:o.shape(g.Shape)},k),getDefaultProps:function(){return {role:'listbox',taggerViewStyle:g.DEFAULT};},render:function(){var q=this.props.entries.length,r=(("_599r")+(!q?' '+"_599s":'')),s=this.props.entries.map(this._renderItem),t=h.createElement("ul",{className:r,id:this.props.ariaOwneeID,role:this.props.role,ref:"list"},s),u=this.props.taggerViewStyle;if(u.useScrollableArea){var v=u.itemHeight*q;if(v>u.maxHeight)t=h.createElement(i,{ref:this._scrollableAreaMount,className:"_53vr",height:u.maxHeight},t);}return t;},_renderItem:function(q){var r=q===this.props.highlightedEntry,s=q.getAuxiliaryData(),t=s.isRegexEntry,u=t?this.getRegexItemImpl():this.getItemImpl(),v=((r?"selected":'')+(t?' '+"_3ooq":''));return (h.createElement(u,{className:v,key:q.getUniqueID(),entry:q,highlighted:r,onSelect:this.props.onSelect,onHighlight:this.props.onHighlight,onRenderHighlight:this._onRenderHighlight,customIcon:this.props.customIcon}));},_onRenderHighlight:function(q){if(this._scrollableArea)this._scrollableArea.scrollIntoView(q,false);this.props.onRenderHighlight(q);},_scrollableAreaMount:function(q){var r=h.findDOMNode(q);this._scrollableArea=j.getInstance(r);l(function(){this._scrollableArea&&this._scrollableArea.resize();}.bind(this));}};e.exports=p;},null);
__d("ReactComposerActionTaggerView.react",["ReactComposerTaggerViewMixin","ReactComposerActionTaggerItem.react","React"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j=i.createClass({displayName:"ReactComposerActionTaggerView",mixins:[g],getItemImpl:function(){return h;}});e.exports=j;},null);
__d("ReactComposerActionTaggerPresenter",["ReactComposerActionTaggerView.react"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();e.exports={ViewRenderer:g,useLayer:true,maxEntries:20};},null);
__d("DummySearchSource",["AbstractSearchSource"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();for(var h in g)if(g.hasOwnProperty(h))j[h]=g[h];var i=g===null?null:g.prototype;j.prototype=Object.create(i);j.prototype.constructor=j;j.__superConstructor__=g;function j(){"use strict";if(g!==null)g.apply(this,arguments);}j.prototype.searchImpl=function(k,l,m){"use strict";l([],k);};e.exports=j;},null);
__d("ReactComposerActionTaggerComponent.react",["ReactComposerActionTaggerPresenter","ReactComposerTaggerViewStyles","AbstractSearchSource","BasicTypeaheadLoggerJSConstants","DummySearchSource","OGComposerJSConstants","React","SearchSourceWithMetrics","TypeaheadMetricReporter","XUITypeahead.react","cx","emptyFunction","fbt","getObjectValues"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){b.__markCompiled&&b.__markCompiled();var u=m,v=u.PropTypes,w=m.createClass({displayName:"ReactComposerActionTaggerComponent",propTypes:{autoFocus:v.bool,taggerSource:v.instanceOf(i).isRequired,onSelect:v.func,typeaheadLoggerEventName:v.oneOf(t(j.EventNames)).isRequired,taggerViewStyle:v.shape(h.Shape)},getDefaultProps:function(){return {autoFocus:true,onSelect:r,taggerSource:new k(),taggerViewStyle:h.DEFAULT};},getInitialState:function(){var x=new o({event_name:this.props.typeaheadLoggerEventName,at_id:l.ActionTypeIDs.COMPOSER_SELECTS_VERB}),y=new n(this.props.taggerSource,x);x.sessionStart();return {query:'',metricReporter:x,searchSource:y};},componentWillUnmount:function(){this.state.metricReporter.sessionEnd();},_onSelect:function(x,event){this.state.metricReporter.reportSelect(x.getUniqueID(),x.getType(),x.getOrder(),!!event&&event.button>=0,this.state.query);this.state.metricReporter.sessionEnd();this.setState({query:x.getTitle()});this.props.onSelect&&this.props.onSelect(x);},_onClear:function(){this.setState({query:''});this.props.onSelect&&this.props.onSelect(null);},_onChange:function(event){this.setState({query:event.target.value});},_onTypeaheadBlur:function(){this.state.metricReporter.sessionEnd();},_onTypeaheadFocus:function(){this.state.metricReporter.sessionStart();},_onEntriesFound:function(x,y){this.state.metricReporter.reportResults(x.map(function(z){return z.getUniqueID();}));},render:function(){return (m.createElement("div",{className:"_3uco _5esl"},m.createElement(p,{presenter:this._getPresenter(),focusedOnInit:this.props.autoFocus,showEntriesOnFocus:true,placeholder:s._("What are you doing?"),className:"_5esx _3ucr",queryString:this.state.query,searchSource:this.state.searchSource,highlightOnSelect:true,onSelectAttempt:this._onSelect,onClear:this._onClear,onChange:this._onChange,onBlur:this._onTypeaheadBlur,onFocus:this._onTypeaheadFocus,onEntriesFound:this._onEntriesFound,tallInput:true,autoHighlight:true})));},_getPresenter:function(){var x={taggerViewStyle:this.props.taggerViewStyle};return Object.assign({},g,{layerPosition:this.props.layerPosition||undefined,extraRendererProps:x});}});e.exports=w;},null);
__d("ReactComposerActivityTaggerButton.react",["ReactComposerTaggerButtonMixin","ReactComposerTaggerType","React","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l=i.createClass({displayName:"ReactComposerActivityTaggerButton",mixins:[g],statics:{taggerID:h.ACTIVITY},getTitle:function(){return k._("Add what you're doing or how you're feeling");},getTooltip:function(){return k._("Add what you're doing or how you're feeling");},getClassName:function(){return "_3vk5";}});e.exports=l;},null);
__d("ReactComposerObjectTaggerItem.react",["BackgroundImage.react","Badge.react","ImageBlock.react","React","TypeaheadViewItem","cx","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();var n=j.createClass({displayName:"ReactComposerObjectTaggerItem",mixins:[k.Mixin],propTypes:k.propTypes,render:function(){var o=this.props.entry,p=o.getSubtitle()?j.createElement("div",{className:"_599q"},o.getSubtitle()):null,q=o.getPhoto()?j.createElement(g,{width:32,height:32,backgroundSize:"cover",src:o.getPhoto()}):j.createElement("span",null),r=o.getAuxiliaryData(),s=r&&r.verified?s=j.createElement(h,null):null,t=r&&r.icon?j.createElement("span",{className:"_2syo",dangerouslySetInnerHTML:r.icon}):null,u=(("_599m")+(!p?' '+"_5mne":'')+(this.props.highlighted?' '+"_599n":''));u=m(u,this.props.className);return (j.createElement("li",{"aria-selected":this.props.highlighted,className:u,onMouseDown:this._onSelect,onMouseEnter:this._onHighlight,role:this.props.role},j.createElement(i,{spacing:"medium"},q,j.createElement("div",null,j.createElement("div",{className:"_599p"},o.getTitle(),s),p),t)));}});e.exports=n;},null);
__d("ReactComposerObjectTaggerView.react",["ReactComposerActionTaggerItem.react","ReactComposerObjectTaggerItem.react","ReactComposerTaggerViewMixin","React"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();var k=j.createClass({displayName:"ReactComposerObjectTaggerView",mixins:[i],getItemImpl:function(){return h;},getRegexItemImpl:function(){return g;}});e.exports=k;},null);
__d("ReactComposerObjectTaggerPresenter",["ReactComposerObjectTaggerView.react"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();e.exports={ViewRenderer:g,useLayer:true,maxEntries:120};},null);
__d("ReactComposerObjectTaggerComponent.react",["ReactComposerObjectTaggerPresenter","ReactComposerTaggerViewStyles","DummySearchSource","Grid.react","React","XUITypeahead.react","cx","emptyFunction"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){b.__markCompiled&&b.__markCompiled();var o=j.GridItem,p=k,q=p.PropTypes,r=k.createClass({displayName:"ReactComposerObjectTaggerComponent",propTypes:{action:q.object.isRequired,autoFocus:q.bool,onClear:q.func.isRequired,onEmptyBackspace:q.func.isRequired,onPrefixClick:q.func.isRequired,onSelect:q.func.isRequired,object:q.object,taggerSource:q.object.isRequired,taggerViewStyle:q.shape(h.Shape)},getDefaultProps:function(){return {autoFocus:true,onClear:n,onEmptyBackspace:n,onPrefixClick:n,onSelect:n,taggerSource:new i(),taggerViewStyle:h.DEFAULT};},getInitialState:function(){return {query:this.props.object?this.props.object.getTitle():''};},_onSelect:function(s){this.setState({query:s.getTitle()});this.props.onSelect(s);},_onBackspace:function(event){if(this.props.object&&this.props.object.getTitle()===event.target.value)this.props.onSelect(null);if(event.target.value==='')this.props.onEmptyBackspace();},_onClear:function(){this.setState({query:''});this.props.onClear();},_onChange:function(event){this.setState({query:event.target.value});},_onPrefixClick:function(){this.props.onPrefixClick();},focusInput:function(){var s=this.refs.objectTypeahead;if(s)s.focusInput&&s.focusInput();},render:function(){var s=this.props.action.getAuxiliaryData(),t=s?s.prompt:'';return (k.createElement(j,{cols:2,className:"_52wi _5esl",role:"presentation"},k.createElement(o,{className:"_5esm _t2_",key:"prefix",role:"presentation",onClick:this._onPrefixClick},this.props.action.getTitle()),k.createElement(o,{className:"_5esw",key:"suffix",role:"presentation"},k.createElement(l,{ref:"objectTypeahead",presenter:this._getPresenter(),clearable:true,focusedOnInit:this.props.autoFocus,autoHighlight:true,showEntriesOnFocus:true,placeholder:t,selectedEntry:this.props.object,className:"_5esx _52xo",queryString:this.state.query,searchSource:this.props.taggerSource,highlightOnSelect:true,onSelectAttempt:this._onSelect,onBackspace:this._onBackspace,onClear:this._onClear,onChange:this._onChange,tallInput:false}))));},_getPresenter:function(){var s={};s.taggerViewStyle=this.props.taggerViewStyle;s.customIcon=this.props.action.getAuxiliaryData().icon;return Object.assign({},g,{layerPosition:this.props.layerPosition||undefined,extraRendererProps:s});}});e.exports=r;},null);
__d("ReactComposerObjectTaggerContainer.react",["ReactComposerObjectTaggerComponent.react","ReactComposerPropsAndStoreBasedStateMixin","ReactComposerTaggerStore","ReactComposerTaggerType","ReactComposerTaggerViewStyles","React","emptyFunction"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();var n=l,o=n.PropTypes,p=l.createClass({displayName:"ReactComposerObjectTaggerContainer",mixins:[h(i)],propTypes:{action:o.object.isRequired,autoFocus:o.bool,onClear:o.func.isRequired,onEmptyBackspace:o.func.isRequired,onPrefixClick:o.func.isRequired,onSelect:o.func.isRequired,object:o.object,taggerViewStyle:o.shape(k.Shape)},getDefaultProps:function(){return {autoFocus:true,onClear:m,onEmptyBackspace:m,onPrefixClick:m,onSelect:m,taggerViewStyle:k.DEFAULT};},statics:{calculateState:function(q,r){var s=i.getTaggerSource(q,j.OG);return {taggerSource:s};}},render:function(){return (l.createElement(g,l.__spread({ref:"objectTagger"},this.props,{taggerSource:this.state.taggerSource})));},focusInput:function(){var q=this.refs.objectTagger;q&&q.focusInput();}});e.exports=p;},null);
__d("ReactComposerActivityTaggerComponent.react",["ReactComposerActionTaggerComponent.react","ReactComposerObjectTaggerContainer.react","ReactComposerTaggerViewStyles","AbstractSearchSource","BasicTypeaheadLoggerJSConstants","DummySearchSource","React","emptyFunction","getObjectValues"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();var p=m,q=p.PropTypes,r=m.createClass({displayName:"ReactComposerActivityTaggerComponent",propTypes:{actorID:q.string.isRequired,autoFocus:q.bool,placeID:q.string,taggerData:q.object.isRequired,taggerSource:q.instanceOf(j).isRequired,onSelect:q.func.isRequired,typeaheadLoggerEventName:q.oneOf(o(k.EventNames)).isRequired,actionTaggerViewStyle:q.shape(i.Shape),objectTaggerViewStyle:q.shape(i.Shape)},getDefaultProps:function(){return {autoFocus:true,taggerData:{},taggerSource:new l(),onSelect:n,actionTaggerViewStyle:i.DEFAULT,objectTaggerViewStyle:i.DEFAULT};},getInitialState:function(){return {action:this.props.taggerData.action,object:this.props.taggerData.object};},componentDidUpdate:function(){if(this.state.action&&!this.state.object){var s=this.refs.objectTagger;s&&s.focusInput();}},componentWillUnmount:function(){if(this.state.action&&!this.state.object)this._clearActionTypeAndObject();},render:function(){if(this.state.action)return (m.createElement(h,{ref:"objectTagger",action:this.state.action,autoFocus:this.props.autoFocus,object:this.state.object,onClear:this._clearActionTypeAndObject,onEmptyBackspace:this._clearActionTypeAndObject,onPrefixClick:this._clearActionTypeAndObject,onSelect:this._onChangeObject,layerPosition:this.props.layerPosition,taggerViewStyle:this.props.objectTaggerViewStyle}));return (m.createElement(g,{autoFocus:this.props.autoFocus,taggerSource:this.props.taggerSource,onSelect:this._onChangeAction,layerPosition:this.props.layerPosition,taggerViewStyle:this.props.actionTaggerViewStyle,typeaheadLoggerEventName:this.props.typeaheadLoggerEventName}));},_onChangeAction:function(s){this.props.onSelect&&this.props.onSelect(this.getTaggerData(s,null));this.setState({action:s});},_onChangeObject:function(s){this.props.onSelect&&this.props.onSelect(this.getTaggerData(this.state.action,s));this.setState({object:s});},_clearActionTypeAndObject:function(){this.props.onSelect&&this.props.onSelect(this.getTaggerData(null,null));this.setState({action:null,object:null});},getTaggerData:function(s,t){var u=this.props.taggerData;u.action=s;u.object=t;var v=t?t.getAuxiliaryData():{};u.eventExpansionType=v.event_expansion_type;return u;}});e.exports=r;},null);
__d("ReactComposerActivityTaggerContainer.react",["ReactComposerActivityTaggerComponent.react","ReactComposerAttachmentStore","ReactComposerAttachmentType","ReactComposerMinutiaeAttachmentActions","ReactComposerTaggerActions","ReactComposerTaggerContainerMixin","ReactComposerTaggerType","ReactComposerTaggerViewStyles","BasicTypeaheadLoggerJSConstants","Map","OGComposerJSConstants","React","RegexMatchSearchSource","WebAsyncPlusRegexSearchSource","WebAsyncSearchSource","getObjectValues"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){b.__markCompiled&&b.__markCompiled();var w=r,x=w.PropTypes,y=r.createClass({displayName:"ReactComposerActivityTaggerContainer",_actionTypeSearchSources:(new p()),_objectSearchSources:(new p()),mixins:[l],statics:{taggerID:m.ACTIVITY,taggerComponent:g},propTypes:{actionTypeIDsToPrefetch:x.array.isRequired,actionTypeIDsWithNoFreeForm:x.object.isRequired,isPersonalTimeline:x.bool,rankVerbs:x.bool,placeID:x.string,typeaheadLoggerEventName:x.oneOf(v(o.EventNames)).isRequired,actionTaggerViewStyle:x.shape(n.Shape),objectTaggerViewStyle:x.shape(n.Shape)},getDefaultProps:function(){return {actionTypeIDsToPrefetch:[],actionTypeIDsWithNoFreeForm:{},isPersonalTimeline:false,placeID:null,rankVerbs:false,actionTaggerViewStyle:n.DEFAULT,objectTaggerViewStyle:n.DEFAULT};},getInitialState:function(){return {hasDoneInitialObjectPrefetch:false};},componentWillMount:function(){this._updateActionTypeSearchSource(this.props.placeID);},componentWillReceiveProps:function(z){if(z.placeID!==this.props.placeID){this._updateActionTypeSearchSource(z.placeID);this._prefetchObjectSearchSources(z.placeID);}},componentWillUpdate:function(z,aa){if(!this.state.isSelected&&aa.isSelected){this._createActionTypeSearchSource(this.props.placeID,{is_prefetching:false});var ba=this.state.hasDoneInitialObjectPrefetch||aa.hasDoneInitialObjectPrefetch;if(!ba)this._prefetchObjectSearchSources(this.props.placeID);}},__onTaggerDataChanged:function(z){if(z.action){this._updateObjectSearchSource(z.action.getUniqueID());if(!z.object)this._createObjectSearchSource(z.action.getUniqueID(),this.props.placeID,{is_prefetching:false});}if(z.action&&z.object){k.selectTagger(this.context.composerID,null);var aa=this._shouldFetchMinutiaeAttachment(z.action,z.object);if(aa)j.fetchMinutiaeAttachment(this.context.composerID,z.action.getUniqueID(),z.object.getUniqueID(),this.context.targetID,!!this.props.isPersonalTimeline);}else j.setMarkup(this.context.composerID,null);},_shouldFetchMinutiaeAttachment:function(z,aa){var ba=h.getIsAttachmentSelected(this.context.composerID,i.STATUS);if(!ba)return false;if(aa.getAuxiliaryData().isRegexEntry)return false;var ca=z.getUniqueID();if(ca==q.ActionTypeIDs.COMPOSER_LOOKS_FOR||ca==q.ActionTypeIDs.COMPOSER_FEELS)return false;return true;},_updateActionTypeSearchSource:function(z){var aa=null;if(this._actionTypeSearchSources.has(z)){aa=this._actionTypeSearchSources.get(z);}else{aa=this._createActionTypeSearchSource(z,{is_prefetching:true});this._actionTypeSearchSources.set(z,aa);}k.setTaggerSource(this.context.composerID,m.ACTIVITY,aa);},_createActionTypeSearchSource:function(z,aa){var ba='/ajax/metacomposer/attachment/og/typeahead/bootstrap/action_type_loader',ca={place_id:z,rank_verbs:this.props.rankVerbs,viewer:this.props.actorID},da={getAllForEmptyQuery:true,bootstrapRequests:[{uri:ba,data:Object.assign({},ca)}],queryRequests:[],auxiliaryFields:{default_icon:'default_icon',icon:'icon',prompt:'prompt'}};if(this.props.rankVerbs)da.queryRequests=[{uri:ba,data:Object.assign({},ca)}];var ea=new u(da);ea.setRequestData(aa);ea.bootstrap();ea.setRequestData(Object.assign(aa,{is_prefetching:false}));return ea;},_prefetchObjectSearchSources:function(z){var aa=this.props.actionTypeIDsToPrefetch,ba=new p();aa.forEach(function(ca){var da=this._createObjectSearchSource(ca,z,{is_prefetching:true});ba.set(ca,da);}.bind(this));this._objectSearchSources=ba;this.setState({hasDoneInitialObjectPrefetch:true});},_updateObjectSearchSource:function(z){var aa=null;if(this._objectSearchSources.has(z)){aa=this._objectSearchSources.get(z);}else{aa=this._createObjectSearchSource(z,this.props.placeID,{is_prefetching:false});this._objectSearchSources.set(z,aa);}k.setTaggerSource(this.context.composerID,m.OG,aa);},_createObjectSearchSource:function(z,aa,ba){var ca='/ajax/metacomposer/attachment/og/typeahead/query/object_loader',da={at_id:z,place_id:aa,viewer:this.props.actorID},ea=new u({getAllForEmptyQuery:true,bootstrapRequests:[{uri:ca,data:Object.assign({},da,{is_bootstrap:true})}],queryRequests:[{uri:ca,data:Object.assign({},da,{is_bootstrap:false})}],auxiliaryFields:{icon:'icon',event_expansion_type:'event_expansion_type',verified:'is_verified'}}),fa=null,ga=this.props.actionTypeIDsWithNoFreeForm,ha=!ga||!ga[z];if(ha){var ia=new s('.+');fa=new t({asyncSource:ea,regexSource:ia,appendRegexEntries:true});}else fa=ea;ea.setRequestData(ba);fa.bootstrap();ea.setRequestData(Object.assign(ba,{is_prefetching:false}));return fa;}});e.exports=y;},null);
__d("ReactComposerLocationSearchSource",["SearchableEntry","WebAsyncSearchSource","isValidUniqueID"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();e.exports=new h({bootstrapRequests:[{uri:'/ajax/places/typeahead'}],getAllForEmptyQuery:true,queryRequests:[{uri:'/ajax/places/typeahead',data:{include_subtext:true,include_address:1,exact_match:false,use_unicorn:true,allow_places:true,allow_cities:true,render_map:false,limit:15}}],packageFn:function(j){var k=j.title||j.text,l=j.uniqueID||j.uid;if(!k||!i(l))return null;var m=[];if(j.address)m.push(j.address);if(j.subtext)m.push(j.subtext);return new g({auxiliaryData:{address:j.address,cityID:j.city_id,cityName:j.city_name,cityPageID:j.city_page_id},photo:j.photo,subtitle:m.join(' \u00b7 '),title:k,type:j.place_type,uniqueID:l,uri:j.uri||j.path});}});},null);
__d("ReactComposerLocationTaggerButton.react",["ReactComposerTaggerButtonMixin","ReactComposerTaggerType","React","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l=i.createClass({displayName:"ReactComposerLocationTaggerButton",mixins:[g],statics:{taggerID:h.LOCATION},getTitle:function(){return k._("Tag a location");},getTooltip:function(){return k._("Add a location to your post");},getClassName:function(){return "_52xx";}});e.exports=l;},null);
__d("ReactComposerLocationTypeaheadComponent.react",["ReactComposerLocationSearchSource","PlaceSearchConstants","React","SearchSourceWithMetrics","TypeaheadMetricReporter","XUITypeahead.react","emptyFunction","fbt","getObjectValues","BasicTypeaheadLoggerJSConstants"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();var p=b('BasicTypeaheadLoggerJSConstants').EventNames,q=i,r=q.PropTypes,s=i.createClass({displayName:"ReactComposerLocationTaggerComponent",propTypes:{autoFocus:r.bool,defaultLocation:r.string,implicitLocationEnabled:r.bool,onSelect:r.func,placeholder:r.string,presenter:r.object,shortTagger:r.bool,taggerData:r.object.isRequired,typeaheadLoggerEventName:r.oneOf(o(p)).isRequired,typeaheadSearchSource:r.oneOf(o(h)).isRequired},getDefaultProps:function(){return {autoFocus:true,implicitLocationEnabled:false,onSelect:m,shortTagger:false,placeholder:n._("Where are you?"),taggerData:{}};},getInitialState:function(){var t={};if(this.props.defaultLocation){t.query=this.props.defaultLocation;}else t.query=this.props.taggerData.place?this.props.taggerData.place.getTitle():'';var u=new k({event_name:this.props.typeaheadLoggerEventName,event_specific_data:{context:'places_typeahead:'+this.props.typeaheadSearchSource,source:this.props.typeaheadSearchSource,ref:'ReactComposerLocationTypeaheadComponent.react'}}),v=new j(g,u);u.sessionStart();t.metricReporter=u;t.searchSource=v;return t;},componentWillUnmount:function(){this.state.metricReporter.sessionEnd();},render:function(){return (i.createElement(l,{className:this.props.className,clearable:true,focusedOnInit:this.props.autoFocus,highlightOnSelect:true,initialEntry:this.props.taggerData.place,onBackspace:this._onBackspace,onBlur:this._onBlur,onChange:this._onChange,onClear:this._onClear,onEntriesFound:this._onEntriesFound,onFocus:this._onFocus,onSelectAttempt:this._onSelect,placeholder:this.props.placeholder,presenter:this.props.presenter,queryString:this.state.query,searchSource:this.state.searchSource,selectedEntry:this.props.taggerData.place,showEntriesOnFocus:true,tallInput:false}));},_getCopyOfData:function(){return Object.assign({},this.props.taggerData);},_onSelect:function(t,event){this.state.metricReporter.reportSelect(t.getUniqueID(),t.getType(),t.getOrder(),!!event&&event.button>=0,this.state.query);this.state.metricReporter.sessionEnd();var u=this._getCopyOfData();u.place=t;this.setState({query:t.getTitle()});this.props.onSelect&&this.props.onSelect(u);},_onChange:function(event){this.setState({query:event.target.value});},_onBackspace:function(event){if(this.state.query===event.target.value)this._removePlace();},_onClear:function(){this._removePlace();this.setState({query:''});},_removePlace:function(){var t=this._getCopyOfData();t.place=null;if(!this.props.implicitLocationEnabled)t.implicitLocation=null;this.props.onSelect&&this.props.onSelect(t);},_onBlur:function(){this.state.metricReporter.sessionEnd();},_onFocus:function(){this.state.metricReporter.sessionStart();},_onEntriesFound:function(t,u){this.state.metricReporter.reportResults(t.map(function(v){return v.getUniqueID();}));}});e.exports=s;},null);
__d("ReactComposerTaggerView.react",["ReactComposerTaggerViewMixin","React","XUITypeaheadViewItem.react"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j=h.createClass({displayName:"ReactComposerTaggerView",mixins:[g],getItemImpl:function(){return i;}});e.exports=j;},null);
__d("ReactComposerTaggerPresenter",["ReactComposerTaggerView.react"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();e.exports={ViewRenderer:g,useLayer:true};},null);
__d("ReactComposerLocationTaggerComponent.react",["ReactComposerLocationTypeaheadComponent.react","ReactComposerTaggerPresenter","ReactComposerTaggerViewStyles","Grid.react","PlaceSearchConstants","React","cx","fbt","getObjectValues","BasicTypeaheadLoggerJSConstants"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();var p=b('BasicTypeaheadLoggerJSConstants').EventNames,q=j.GridItem,r=l,s=r.PropTypes,t=l.createClass({displayName:"ReactComposerLocationTaggerComponent",propTypes:{autoFocus:s.bool,implicitLocationEnabled:s.bool,onSelect:s.func,placeholder:s.string,taggerData:s.object.isRequired,taggerViewStyle:s.shape(i.Shape),typeaheadLoggerEventName:s.oneOf(o(p)).isRequired,typeaheadSearchSource:s.oneOf(o(k)).isRequired},getDefaultProps:function(){return {taggerViewStyle:i.DEFAULT};},render:function(){return (l.createElement(j,{cols:2,className:"_5es8 _5esl",role:"presentation"},l.createElement(q,{key:"prefix",className:"_5esm",role:"presentation"},n._("At")),l.createElement(q,{key:"tagger",className:"_5esw",role:"presentation"},l.createElement(g,l.__spread({},this.props,{className:"_5esx _5esy",presenter:this._getPresenter()})))));},_getPresenter:function(){var u={taggerViewStyle:this.props.taggerViewStyle};return Object.assign({},h,{layerPosition:this.props.layerPosition||undefined,extraRendererProps:u,maxEntries:15});}});e.exports=t;},null);
__d("ReactComposerLocationTaggerContainer.react",["ReactComposerLocationTaggerComponent.react","ReactComposerTaggerActions","ReactComposerTaggerContainerMixin","ReactComposerTaggerType","ReactComposerTaggerViewStyles","PlaceSearchConstants","React","emptyFunction","getObjectValues","BasicTypeaheadLoggerJSConstants"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();var p=b('BasicTypeaheadLoggerJSConstants').EventNames,q=m,r=q.PropTypes,s=m.createClass({displayName:"ReactComposerLocationTaggerContainer",mixins:[i],propTypes:{onSelect:r.func.isRequired,taggerData:r.object,taggerViewStyle:r.shape(k.Shape),typeaheadLoggerEventName:r.oneOf(o(p)).isRequired,typeaheadSearchSource:r.oneOf(o(l)).isRequired},getDefaultProps:function(){return {onSelect:n,taggerViewStyle:k.DEFAULT};},statics:{taggerID:j.LOCATION,taggerComponent:g},__onTaggerDataChanged:function(t){var u=t.place&&t.place.getAuxiliaryData();if(u)t.implicitLocation={cityid:u.cityID,citypageid:u.cityPageID,citystring:u.cityName};if(t.place)h.selectTagger(this.context.composerID,null);}});e.exports=s;},null);
__d("ReactComposerPeopleTaggerButton.react",["ReactComposerTaggerButtonMixin","ReactComposerTaggerType","React","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l=i.createClass({displayName:"ReactComposerPeopleTaggerButton",mixins:[g],statics:{taggerID:h.PEOPLE},getTitle:function(){return k._("Tag people");},getTooltip:function(){return k._("Tag people in your post");},getClassName:function(){return "_41bh";}});e.exports=l;},null);
__d("ReactComposerPeopleTaggerComponent.react",["ReactComposerTaggerPresenter","ReactComposerTaggerViewStyles","Grid.react","React","XUITokenizer.react","cx","emptyFunction","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){b.__markCompiled&&b.__markCompiled();var o=i.GridItem,p=j,q=p.PropTypes,r=j.createClass({displayName:"ReactComposerPeopleTaggerComponent",propTypes:{actorID:q.string,autoFocus:q.bool,placeholder:q.string,taggerSource:q.object.isRequired,taggerData:q.array.isRequired,onPeopleTagRemove:q.func,onSelect:q.func,taggerViewStyle:q.shape(h.Shape)},getDefaultProps:function(){return {autoFocus:true,onSelect:m,placeholder:n._("Who are you with?"),taggerViewStyle:h.DEFAULT,taggerData:[]};},_onAdd:function(s){var t=this.props.taggerData,u=s.getUniqueID(),v=t.some(function(w){return w.getUniqueID()===u;});if(v){return;}else t.push(s);this.props.onSelect&&this.props.onSelect(t);},_onRemove:function(s){var t=this.props.taggerData,u=t.indexOf(s);if(u==-1)return;t.splice(u,1);this.props.onPeopleTagRemove&&this.props.onPeopleTagRemove(s);this.props.onSelect&&this.props.onSelect(t);},render:function(){var s={};if(this.props.actorID)s[this.props.actorID]=true;return (j.createElement(i,{cols:2,className:"_3v-g _5esl",role:"presentation"},j.createElement(o,{key:"label",className:"_5esm",role:"presentation"},n._("With")),j.createElement(o,{key:"tokenizer",className:"_5esw",role:"presentation"},j.createElement(k,j.__spread({presenter:this._getPresenter(),focusedOnInit:this.props.autoFocus,excludedEntries:s,entries:this.props.taggerData,className:"_5esx _3v-n",placeholder:this.props.placeholder,searchSource:this.props.taggerSource,onAddEntryAttempt:this._onAdd,onRemoveEntryAttempt:this._onRemove},this.props)))));},_getPresenter:function(){var s=this.props.peopleTaggerConfig&&this.props.peopleTaggerConfig.presenter?this.props.peopleTaggerConfig.presenter:g,t={};t.taggerViewStyle=this.props.taggerViewStyle;t.viewProps=this.props.peopleTaggerConfig&&this.props.peopleTaggerConfig.typeaheadViewProps;return Object.assign({},s,{layerPosition:this.props.layerPosition||undefined,extraRendererProps:t});}});e.exports=r;},null);
__d("ReactComposerPeopleTaggerContainer.react",["ReactComposerPeopleTaggerComponent.react","ReactComposerPhotoActions","ReactComposerTaggerActions","ReactComposerTaggerContainerStateMixin","ReactComposerTaggerType","ReactComposerTaggerViewStyles","React"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();var n=m,o=n.PropTypes,p=m.createClass({displayName:"ReactComposerPeopleTaggerContainer",mixins:[j],propTypes:{actorID:o.string,taggerData:o.array,taggerViewStyle:o.shape(l.Shape)},getDefaultProps:function(){return {taggerViewStyle:l.DEFAULT};},statics:{taggerID:k.PEOPLE},render:function(){if(!this.state.isSelected)return m.createElement("noscript",null);return (m.createElement(g,m.__spread({},this.props,{autoFocus:this.state.autoFocus,onPeopleTagRemove:this._onPeopleTagRemove,onSelect:this._onTaggerDataChanged,taggerData:this.state.taggerData,taggerSource:this.state.taggerSource})));},_onTaggerDataChanged:function(q){i.setTaggerData(this.context.composerID,k.PEOPLE,q);this.props.onSelect&&this.props.onSelect(q);},_onPeopleTagRemove:function(q){h.untagSubjectFromAllPhotos(this.context.composerID,q.getUniqueID());}});e.exports=p;},null);
__d("ReactShareDialogComposerActionType",["keyMirror"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();e.exports=g({SET_SHARE_DIALOG_TARGET:null,SET_SHARE_DIALOG_TARGET_INFO:null,SET_SHARE_DIALOG_ATTRIBUTION:null});},null);
__d("ReactShareDialogComposerStore",["ReactComposerStoreBase","ReactShareDialogComposerActionType"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();for(var i in g)if(g.hasOwnProperty(i))k[i]=g[i];var j=g===null?null:g.prototype;k.prototype=Object.create(j);k.prototype.constructor=k;k.__superConstructor__=g;function k(){"use strict";g.call(this,(function(){return {target:null,targetInfo:{},attribution:null};}),(function(l){switch(l.type){case h.SET_SHARE_DIALOG_TARGET:this.$ReactShareDialogComposerStore0(l);break;case h.SET_SHARE_DIALOG_TARGET_INFO:this.$ReactShareDialogComposerStore1(l);break;case h.SET_SHARE_DIALOG_ATTRIBUTION:this.$ReactShareDialogComposerStore2(l);break;}}.bind(this)));}k.prototype.getTarget=function(l){"use strict";return this.getComposerData(l).target;};k.prototype.getTargetInfo=function(l){"use strict";return this.getComposerData(l).targetInfo;};k.prototype.getAttribution=function(l){"use strict";return this.getComposerData(l).attribution;};k.prototype.$ReactShareDialogComposerStore0=function(l){"use strict";var m=this.getComposerData(l.composerID);m.target=l.target;this.emitChange(l.composerID);};k.prototype.$ReactShareDialogComposerStore1=function(l){"use strict";var m=this.getComposerData(l.composerID);m.targetInfo=l.targetInfo;this.emitChange(l.composerID);};k.prototype.$ReactShareDialogComposerStore2=function(l){"use strict";var m=this.getComposerData(l.composerID);m.attribution=l.attribution;this.emitChange(l.composerID);};e.exports=new k();},null);
__d("ReactShareDialogComposerActions",["ReactComposerDispatcher","ReactShareDialogComposerActionType","ReactShareDialogComposerStore"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();b('ReactShareDialogComposerStore');var i={setTarget:function(j,k){g.dispatch({composerID:j,type:h.SET_SHARE_DIALOG_TARGET,target:k});},setTargetInfo:function(j,k){g.dispatch({composerID:j,type:h.SET_SHARE_DIALOG_TARGET_INFO,targetInfo:k});},setAttribution:function(j,k){g.dispatch({composerID:j,type:h.SET_SHARE_DIALOG_ATTRIBUTION,attribution:k});}};e.exports=i;},null);
__d("ShareDialogAttribution.react",["React","cx","emptyFunction","fbt","Link.react"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l=g,m=l.PropTypes,n=g.createClass({displayName:"ShareDialogAttribution",propTypes:{name:m.string,onRemove:m.func},getDefaultProps:function(){return {onRemove:i};},_onRemove:function(){this.props.onRemove();},render:function(){return (g.createElement("div",{className:"_5qio"},g.createElement("span",null,j._("via"))," ",this.props.name," "+" "+"(",g.createElement(k,{onClick:this._onRemove},j._("remove")),")"));}});e.exports=n;},null);
__d("ShareDialogAttachment.react",["React","cx","emptyFunction","fbt","Link.react"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l=g,m=l.PropTypes,n=g.createClass({displayName:"ShareDialogAttachment",propTypes:{overflowing:m.bool,onExpand:m.func,onCollapse:m.func},getDefaultProps:function(){return {overflowing:false,onExpand:i,onCollapse:i};},getInitialState:function(){return {expanded:false};},_toggle:function(){if(this.state.expanded){this.props.onCollapse();}else this.props.onExpand();this.setState({expanded:!this.state.expanded});},render:function(){var o;if(this.props.overflowing){var p;if(this.state.expanded){p=g.createElement("span",null,g.createElement("span",{className:"_u_1"},"↑")," ",j._("Collapse"));}else p=g.createElement("span",null,j._("Show All")," ",g.createElement("span",{className:"_u_1"},"↓"));o=g.createElement("p",{className:"_u_2"},g.createElement(k,{className:"_u_3",onClick:this._toggle},p));}var q=(("_u_4")+(this.props.overflowing&&!this.state.expanded?' '+"_u_5":''));return (g.createElement("div",{className:q},o,this.props.children));}});e.exports=n;},null);
__d("ReactShareDialogAttachmentContainer.react",["ReactComposerContextMixin","ShareDialogAttachment.react","DOMContainer.react","LitestandShareAttachment","React","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();var m=k,n=m.PropTypes,o=400,p=k.createClass({displayName:"ReactShareDialogAttachmentContainer",mixins:[g],propTypes:{attachment:n.instanceOf(HTMLElement)},getInitialState:function(){return {shouldOverflow:false};},componentDidMount:function(){setTimeout(function(){var q=false;if(this.props.attachment&&this.refs.attachment){var r=k.findDOMNode(this.refs.attachment);if(r){j.init(r);if(this.context.gks.gkOsricExpandAttachment)q=r.clientHeight>o;}}this.setState({shouldOverflow:q});}.bind(this),0);},render:function(){if(!this.props.attachment)return null;return (k.createElement(h,{overflowing:this.state.shouldOverflow},k.createElement("div",{ref:"attachment",className:"_51jo"},k.createElement(i,null,this.props.attachment))));}});e.exports=p;},null);
__d("ReactShareDialogComposerStatusAttachmentFooter.react",["ReactComposerActivityTaggerButton.react","ReactComposerActivityTaggerContainer.react","ReactComposerAudienceSelectorContainer.react","ReactComposerContextMixin","ReactComposerFooter.react","ReactComposerFooterActions.react","ReactComposerLocationTaggerButton.react","ReactComposerLocationTaggerContainer.react","ReactComposerPeopleTaggerButton.react","ReactComposerPeopleTaggerContainer.react","ReactComposerTaggerButtons.react","ReactComposerTaggers.react","ReactComposerTaggerType","ReactComposerTaggerViewStyles","ShareDialogAudienceTypes","LeftRight.react","PlaceSearchConstants","ReactComponentWithPureRenderMixin","React","XUIAmbientNUX.react","XUIButton.react","cx","emptyFunction","fbt","BasicTypeaheadLoggerJSConstants"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da){b.__markCompiled&&b.__markCompiled();var ea=b('BasicTypeaheadLoggerJSConstants').EventNames,fa=y,ga=fa.PropTypes,ha=y.createClass({displayName:"ReactShareDialogComposerStatusAttachmentFooter",mixins:[x,j],propTypes:{taggersSource:ga.object.isRequired,privacySelector:ga.instanceOf(HTMLElement).isRequired,onActivityNUXClose:ga.func,onCancel:ga.func.isRequired,onPost:ga.func.isRequired,onSelectActivity:ga.func.isRequired,onSelectLocation:ga.func.isRequired,placeID:ga.string,showActivityNUX:ga.bool,showTaggers:ga.bool.isRequired,posting:ga.bool,taggersConfig:ga.object.isRequired,target:u.isValid,targetInfo:ga.object.isRequired},getDefaultProps:function(){return {onCancel:ca,onPost:ca,onActivityNUXClose:ca,onSelectActivity:ca,onSelectLocation:ca,showActivityNUX:false,showTaggers:false,targetInfo:{}};},render:function(){return (y.createElement("div",null,this._getTaggers(),y.createElement(k,{background:"light-wash"},y.createElement(v,null,this._getButtons(),this._getFooterActions()))));},_getTaggers:function(){if(!this.props.showTaggers)return y.createElement("noscript",null);var ia=this.props.taggersConfig[s.OG];return (y.createElement(r,null,y.createElement(p,{actorID:this.context.actorID,layerPosition:"above",taggerSource:this.props.taggersSource[s.PEOPLE],taggerViewStyle:t.DEFAULT}),y.createElement(n,{actorID:this.context.actorID,layerPosition:"above",onSelect:this.props.onSelectLocation,taggerSource:this.props.taggersSource[s.LOCATION],taggerViewStyle:t.SCROLLABLE_SHORT,typeaheadLoggerEventName:ea.REACT_SHARE_DIALOG_LOCATION_TAGGER,typeaheadSearchSource:w.SOURCE_W_COMPOSER}),y.createElement(h,{actorID:this.context.actorID,layerPosition:"above",onSelect:this.props.onSelectActivity,placeID:this.props.placeID,taggerSource:this.props.taggersSource[s.ACTIVITY],actionTypeIDsWithNoFreeForm:ia.actionTypeIDsWithNoFreeForm,actionTypeIDsToPrefetch:ia.actionTypeIDsToPrefetch,rankVerbs:ia.rankVerbs,typeaheadLoggerEventName:ea.REACT_SHARE_DIALOG_OG_TAGGER,actionTaggerViewStyle:t.SCROLLABLE_SHORT,objectTaggerViewStyle:t.SCROLLABLE_SHORT})));},_getButtons:function(){if(!this.props.showTaggers||this.props.posting)return y.createElement("noscript",null);return (y.createElement(q,null,y.createElement(o,null),y.createElement(m,null),y.createElement(g,{ref:"activityButton"}),this._getActivityNUX()));},_getActivityNUX:function(){if(!this.props.showActivityNUX||!this.refs.activityButton)return null;return (y.createElement(z,{context:y.findDOMNode(this.refs.activityButton),onCloseButtonClick:this.props.onActivityNUXClose,position:"above",shown:true},da._("New! You can choose to share your feelings and activities.")));},_getFooterActions:function(){var ia=this.props.target===u.OWN&&!this.props.posting?y.createElement(i,{audienceXHP:this.props.privacySelector,viewerIsTarget:this.props.target===u.OWN}):y.createElement("noscript",null),ja=this.props.target!==u.OWN&&!this.props.targetInfo.audienceTargets,ka=this.props.postButtonLabel;if(ka===undefined)if(this.props.target!==u.MESSAGE){ka=this.props.posting?da._("Posting"):da._("Post");}else ka=this.props.posting?da._("Sending"):da._("Send");return (y.createElement(l,null,ia,y.createElement("div",{className:"_4-88"},y.createElement(aa,{use:"default",label:da._("Cancel"),className:"_2g60",onClick:this.props.onCancel}),y.createElement(aa,{use:"confirm",label:ka,className:"_2g61",onClick:this.props.onPost,disabled:ja}))));}});e.exports=ha;},null);
__d("ReactShareDialogComposerStatusAttachmentFooterContainer.react",["ReactComposerPropsAndStoreBasedStateMixin","ReactComposerTaggerActions","ReactComposerTaggerStore","ReactComposerTaggerType","ComposerXNUX","ReactShareDialogComposerStatusAttachmentFooter.react","ReactShareDialogComposerStore","ReactComponentWithPureRenderMixin","React"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();var p=o,q=p.PropTypes,r=o.createClass({displayName:"ReactShareDialogComposerStatusAttachmentFooterContainer",mixins:[n,g(i,m)],propTypes:{showActivityNUX:q.bool},statics:{calculateState:function(s,t){var u=i.getTaggerData(s,j.LOCATION),v=u&&u.place&&u.place.getUniqueID();return {placeID:v,target:m.getTarget(s),targetInfo:m.getTargetInfo(s)};}},getInitialState:function(){return {showActivityNUX:this.props.showActivityNUX,posting:false};},componentWillMount:function(){if(this.props.showActivityNUX)setTimeout(function(){this.setState({showActivityNUX:true});}.bind(this),1000);},render:function(){return (o.createElement(l,o.__spread({},this.props,this.state,{onActivityNUXClose:this._onActivityNUXClose,onPost:this._onPost,onSelectActivity:this._closeTaggers,onSelectLocation:this._closeTaggers})));},_closeTaggers:function(s){if(s&&s.action&&!s.object)return;h.selectTagger(this.context.composerID,null);},_onActivityNUXClose:function(){this.setState({showActivityNUX:false});k.sendMarkSeenRequest(k.SHARER_MINUTIAE_NUX);},_onPost:function(s){this.setState({posting:true});this.props.onPost(s);}});e.exports=r;},null);
__d("ReactShareDialogComposerStatusAttachment.react",["ReactComposerContextMixin","ReactComposerStatusAttachmentMentionsInputContainer.react","ReactComposerTaggerSummaryContainer.react","ReactComposerTaggerType","ShareDialogAttribution.react","ReactShareDialogAttachmentContainer.react","ShareDialogAudienceTypes","ShareDialogDataSources","ReactShareDialogComposerStatusAttachmentFooterContainer.react","ShareDialogWarningNotice.react","SharerType","React","XUINotice.react","cx","emptyFunction","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){b.__markCompiled&&b.__markCompiled();var w=r,x=w.PropTypes,y=r.createClass({displayName:"ReactShareDialogComposerStatusAttachment",mixins:[g],propTypes:{activeAudience:m.propType,privacySelector:x.instanceOf(HTMLElement).isRequired,attachment:x.object,dataSources:x.instanceOf(n).isRequired,taggersData:x.object,onCancel:x.func,onPost:x.func,onRemoveAttribution:x.func,publicityWarning:x.object,showDoingNUX:x.bool,via:x.object,useCheckinBranding:x.bool,sharerType:x.oneOf([q.ALL_MODES,q.MESSAGE_ONLY,q.PAGE_ONLY,q.PAGE_VIEWER]),subtleWarning:x.bool,taggersConfig:x.object.isRequired,postButtonLabel:x.string},getDefaultProps:function(){return {taggersData:{},onCancel:u,onPost:u,onRemoveAttribution:u};},render:function(){var z=this.props.dataSources,aa=this.props.activeAudience!==m.MESSAGE?z.getSource(n.TYPES.MENTIONS):null,ba=v._("Say something about this..."),ca=r.createElement("noscript",null);if(this._shouldShowTaggers())ca=r.createElement(i,null);return (r.createElement("div",null,r.createElement(h,{mentionsSource:aa,placeholder:ba,className:"autofocus"}),ca,this._getAttribution(),r.createElement(l,{attachment:this.props.attachment}),this._getWarning(),r.createElement(o,{showTaggers:this._shouldShowTaggers(),taggersSource:this._getTaggersSource(),privacySelector:this.props.privacySelector,onCancel:this.props.onCancel,onPost:this.props.onPost,showActivityNUX:this.props.showDoingNUX,taggersConfig:this.props.taggersConfig,postButtonLabel:this.props.postButtonLabel})));},_shouldShowTaggers:function(){return (this.context.gks.gkOsricTaggers&&this.props.activeAudience!==m.GROUP&&this.props.activeAudience!==m.MESSAGE&&this.props.sharerType!==q.PAGE_VIEWER);},_getTaggersSource:function(){var z={},aa=this.props.dataSources;z[j.PEOPLE]=aa.getSource(n.TYPES.PERSON);z[j.LOCATION]=aa.getSource(n.TYPES.PLACE);z[j.ACTIVITY]=aa.getSource(n.TYPES.ACTION);return z;},_getTaggerData:function(z){return this.props.taggersData?this.props.taggersData[z]:null;},_getAttribution:function(){var z=this.props.attribution;if(!z||!z.name||this.props.activeAudience===m.MESSAGE)return r.createElement("noscript",null);return (r.createElement(k,{onRemove:this.props.onRemoveAttribution,name:z.name}));},_getWarning:function(){if(!this.props.publicityWarning)return r.createElement("noscript",null);if(this.props.subtleWarning){return (r.createElement(p,{warning:this.props.publicityWarning}));}else return (r.createElement(s,{className:"_2nt0",size:"small"},r.createElement("span",{dangerouslySetInnerHTML:this.props.publicityWarning})));}});e.exports=y;},null);
__d("ReactShareDialogComposerStatusAttachmentContainer.react",["ReactComposerPropsAndStoreBasedStateMixin","ReactComposerTaggerActions","ReactComposerTaggerStore","ReactComposerTaggerType","ReactShareDialogComposerActions","ReactShareDialogComposerStore","ShareDialogAudienceTypes","ReactShareDialogComposerStatusAttachment.react","ShareDialogDataSources","Arbiter","React","containsNode","emptyFunction"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){b.__markCompiled&&b.__markCompiled();var t=q,u=t.PropTypes,v=q.createClass({displayName:"ReactShareDialogComposerStatusAttachmentContainer",_ogSubscription:Object,mixins:[g(i,l)],propTypes:{activeAudience:m.propType,privacySelector:u.instanceOf(HTMLElement).isRequired,attachment:u.object,dataSources:u.instanceOf(o).isRequired,onCancel:u.func,onPost:u.func,publicityWarning:u.object,showDoingNUX:u.bool,via:u.object,useCheckinBranding:u.bool},getDefaultProps:function(){return {onCancel:s,onPost:s};},componentWillMount:function(){this._ogSubscription=p.subscribe('composer/ogCustomIconSelected',function(event,w){if(!r(q.findDOMNode(this.refs.shareBody),w.triggerElement))return;var x=i.getTaggerData(this.context.composerID,j.ACTIVITY)||{};x.actionIconID=w.icon_id;h.setTaggerData(this.context.composerID,j.ACTIVITY,x);}.bind(this));},componentWillUnmount:function(){if(this._ogSubscription){var w=this._ogSubscription;w.unsubscribe&&w.unsubscribe();this._ogSubscription=null;}},statics:{beforeCalculateInitialState:function(w,x){var y=x.via;if(y&&y.name)k.setAttribution(w,y);},calculateState:function(w,x){var y=i.getTaggerData(w,j.ACTIVITY);return {taggersData:i.getTaggersData(w),attribution:l.getAttribution(w),actionIconID:y?y.actionIconID:null};}},render:function(){return (q.createElement(n,q.__spread({ref:"shareBody"},this.props,this.state,{onRemoveAttribution:this._onRemoveAttribution})));},_onRemoveAttribution:function(){k.setAttribution(this.context.composerID,null);}});e.exports=v;},null);
__d("ReactShareDialogComposerStatusEagerAttachment.react",["ReactComposerAttachmentType","ReactComposerAttachmentBodyMixin","ShareDialogAudienceTypes","ReactShareDialogComposerStatusAttachmentContainer.react","ShareDialogDataSources","React","emptyFunction"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();var n=l,o=n.PropTypes,p=l.createClass({displayName:"ReactShareDialogComposerStatusEagerAttachment",mixins:[h()],propTypes:{selected:o.bool,subtleWarning:o.bool,activeAudience:i.propType,privacySelector:o.instanceOf(HTMLElement).isRequired,attachment:o.object,dataSources:o.instanceOf(k),onCancel:o.func,onPost:o.func,publicityWarning:o.object,showDoingNUX:o.bool,via:o.object,useCheckinBranding:o.bool,taggersConfig:o.object.isRequired},getDefaultProps:function(){return {selected:true,onCancel:m,onPost:m};},statics:{attachmentID:g.STATUS},renderX:function(){return l.createElement(j,l.__spread({},this.props));}});e.exports=p;},null);
__d("ReactShareDialogComposer.react",["ReactComposer.react","ReactComposerBody.react","ShareDialogAudienceTypes","ReactShareDialogComposerStatusEagerAttachment.react","ShareDialogDataSources","SharerType","React","emptyFunction"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){b.__markCompiled&&b.__markCompiled();'use strict';var o=m,p=o.PropTypes,q=m.createClass({displayName:"ReactShareDialogComposer",propTypes:{experiments:p.shape({subtleWarning:p.bool}),postId:p.string,shareType:p.string,activeAudience:i.propType,privacySelector:p.instanceOf(HTMLElement).isRequired,userId:p.string.isRequired,attachment:p.object,dataSources:p.instanceOf(k),onCancel:p.func,onPost:p.func,postButtonLabel:p.string,publicityWarning:p.object,sharerType:p.oneOf([l.ALL_MODES,l.MESSAGE_ONLY,l.PAGE_ONLY,l.PAGE_VIEWER]),showDoingNUX:p.bool,via:p.object,useCheckinBranding:p.bool,taggersConfig:p.object.isRequired},getDefaultProps:function(){return {onCancel:n,onPost:n,sharerType:l.ALL_MODES,status:{type:'composing'}};},_onCancel:function(r){var s=this.props.onCancel;s&&s(r);},_onPost:function(r){var s=this.props.onPost;s&&s(r);},render:function(){return (m.createElement(g,{hideBorders:true,loggingConfig:this.props.loggingConfig},m.createElement(h,null,m.createElement(j,{activeAudience:this.props.activeAudience,privacySelector:this.props.privacySelector,attachment:this.props.attachment,dataSources:this.props.dataSources,onCancel:this._onCancel,onPost:this._onPost,publicityWarning:this.props.publicityWarning,showDoingNUX:this.props.showDoingNUX,via:this.props.via,useCheckinBranding:this.props.useCheckinBranding,sharerType:this.props.sharerType,subtleWarning:this.props.experiments&&this.props.experiments.subtleWarning,taggersConfig:this.props.taggersConfig,postButtonLabel:this.props.postButtonLabel}))));}});e.exports=q;},null);
__d("ShareDialogAudienceHeader.react",["ShareDialogAudience.react","ShareDialogAudienceSelector.react","ShareDialogDataSources","SharerType","React","cx","emptyFunction"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();var n=g.TYPES,o=i.TYPES,p=k,q=p.PropTypes,r=k.createClass({displayName:"ShareDialogAudienceHeader",propTypes:{activeAudience:function(s){if(!n.isValid(s.activeAudience))return new Error('The active audience is invalid.');},dataSources:q.instanceOf(i),onAudienceSelect:q.func},getDefaultProps:function(){return {onAudienceSelect:m};},render:function(){var s=this.props.dataSources,t=this.props.activeAudience,u=[];if(this.props.sharerType===j.MESSAGE_ONLY){u.push(n.MESSAGE);}else if(this.props.sharerType===j.PAGE_ONLY){u.push(n.PAGE);}else if(this.props.sharerType===j.PAGE_VIEWER){u.push(n.OWN);}else{u.push(n.OWN);if(s.getSource(o.PERSON_WALL))u.push(n.PERSON);if(s.getSource(o.GROUP))u.push(n.GROUP);if(s.getSource(o.PAGE))u.push(n.PAGE);if(s.getSource(o.MESSAGE))u.push(n.MESSAGE);}var v=(("__0k")+(this.props.activeAudience===n.OWN?' '+"_47xt":'')+(this.props.activeAudience===n.PERSON?' '+"_47xu":'')+(this.props.activeAudience===n.GROUP?' '+"_47xv":'')+(this.props.activeAudience===n.PAGE?' '+"_47xw":'')+(this.props.activeAudience===n.MESSAGE?' '+"_47xx":''));return (k.createElement("div",{className:v},k.createElement(h,{allowedAudiences:u,activeAudience:t,onAudienceSelect:this.props.onAudienceSelect})));}});e.exports=r;},null);
__d("ReactSharer.react",["ReactShareDialogComposer.react","ShareDialogAudienceHeader.react","ShareDialogAudienceTypes","ShareDialogAudience.react","ShareDialogDataSources","React"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();var m=l,n=m.PropTypes,o=l.createClass({displayName:"ReactSharer",propTypes:{activeAudience:i.propType,dataSources:n.instanceOf(k),privacySelector:n.instanceOf(HTMLElement).isRequired,userId:n.string.isRequired,attachment:n.object,gks:n.shape({showGroupThreads:n.bool,subtleWarning:n.bool}),messageTargets:n.array,onCancel:n.func,onChangeAudienceTargets:n.func,onClearAudienceTargets:n.func,onTargetSelect:n.func,onPost:n.func,postButtonLabel:n.string,taggersConfig:n.object.isRequired},render:function(){return (l.createElement("div",null,l.createElement(h,{key:"title",activeAudience:this.props.activeAudience,dataSources:this.props.dataSources,onAudienceSelect:this.props.onTargetSelect}),l.createElement(j,{key:"audience",userId:this.props.userId,activeAudience:this.props.activeAudience,messageTargets:this.props.messageTargets,dataSources:this.props.dataSources,onChange:this.props.onChangeAudienceTargets,onClear:this.props.onClearAudienceTargets,showGroupThreads:this.props.gks&&this.props.gks.showGroupThreads}),l.createElement(g,l.__spread({},this.props))));}});e.exports=o;},null);
__d("ReactSharerContainer.react",["ReactComposerAudienceStore","ReactComposerContextMixin","ReactComposerPropsAndStoreBasedStateMixin","ReactComposerStatusStore","ReactComposerTaggerStore","ReactComposerTaggerType","ReactSharer.react","ReactShareDialogComposerActions","ReactShareDialogComposerStore","ShareDialogAudienceTypes","SharerType","ReactComponentWithPureRenderMixin","React"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){b.__markCompiled&&b.__markCompiled();var t=s.createClass({displayName:"ReactSharerContainer",mixins:[r,h,i(o)],statics:{beforeCalculateInitialState:function(u,v){var w=p.OWN;if(v.sharerType===q.MESSAGE_ONLY){w=p.MESSAGE;}else if(v.sharerType===q.PAGE_ONLY)w=p.PAGE;n.setTarget(u,w);n.setTargetInfo(u,{userId:v.userId});},calculateState:function(u,v){var w=o.getTargetInfo(u),x=w.audienceTargets,y=w.userId;return {activeAudience:o.getTarget(u),audienceTargets:x,userId:y};}},render:function(){return (s.createElement(m,s.__spread({},this.props,this.state,{onCancel:this._onCancel,onChangeAudienceTargets:this._onChangeAudienceTargets,onClearAudienceTargets:this._onClearAudienceTargets,onPost:this._onPost,onTargetSelect:this._onTargetSelect})));},_getStatefulResponse:function(){var u=this.props.contextConfig.composerID,v=k.getTaggersData(u),w=g.getAudience(u),x=j.getMessage(u),y=o.getTarget(u),z=o.getTargetInfo(u),aa=o.getAttribution(u),ba=z.audienceTargets?z.audienceTargets:[],ca=v[l.PEOPLE],da=v[l.LOCATION],ea=v[l.ACTIVITY],fa=ca.map(function(ka){return ka.getUniqueID();}),ga=null,ha=null;if(ea.object){var ia=ea.object.getUniqueID(),ja=ea.object.getTitle();if(!ia||ia===ja){ha=ja;}else ga=ia;}return {actorId:z.userId,audienceType:y,audienceTargets:ba,appId:this.props.appId,attributionId:aa?aa.id:null,internalExtra:this.props.internalExtra,message:x,messageTags:this.props.messageTags,ownerId:this.props.ownerId,privacy:w,postId:this.props.postId,sharedAdId:this.props.sharedAdId,shareType:this.props.shareType,source:'osbach-sharer',taggedActionId:ea.action?ea.action.getUniqueID():null,taggedActionIconId:ea.actionIconId,taggedObjectId:ga,taggedObjectStr:ha,taggedPeople:fa,taggedPlace:da&&da.place?da.place.getUniqueID():null};},_onTargetSelect:function(u){n.setTarget(this.context.composerID,u);n.setTargetInfo(this.context.composerID,{audienceTargets:null,userId:this.props.userId});},_onCancel:function(u){this.props.onCancel&&this.props.onCancel(this._getStatefulResponse(),u);},_onChangeAudienceTargets:function(u){if(u.length===0)return;var v=u[0],w=this.state.activeAudience===p.PAGE?{audienceTargets:[v.pageId],userId:v.actorId}:{audienceTargets:u,userId:this.props.userId};n.setTargetInfo(this.context.composerID,w);},_onClearAudienceTargets:function(){n.setTargetInfo(this.context.composerID,{audienceTargets:null,userId:this.props.userId});},_onPost:function(u){this.props.onPost(this._getStatefulResponse(),u);}});e.exports=t;},null);
__d("ReactSharerRoot.react",["ReactComposerContextConfig","ReactComposerContextProviderMixin","ReactSharerContainer.react","ReactComponentWithPureRenderMixin","React"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l=k.createClass({displayName:"ReactSharerRoot",mixins:[j,h],propTypes:{contextConfig:g.isRequired},render:function(){return k.createElement(i,k.__spread({},this.props));}});e.exports=l;},null);
__d("ReactSharerInit",["ReactSharerRoot.react","ShareDialogAudienceTypes","ShareDialogDataSources","ComposerEntryPointRef","DOM","Sharer","React","uniqueID"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){b.__markCompiled&&b.__markCompiled();var o,p={init:function(q,r){q=this.getPropsFromAsyncResponse(q);o=r;m.render(m.createElement(g,m.__spread({contextConfig:{actorID:q.userId,composerID:n(),composerType:j.SHARE_BUTTON_PLUGIN,gks:q.gks,targetID:q.userId},onCancel:this._onCancel,onPost:this._onPost},q)),o);},_onCancel:function(q,r){l.close();r.preventDefault();},_onPost:function(q,r){if(q.audienceType===h.OWN){k.appendContent(o,k.create('input',{name:'privacyx',type:'hidden',value:q.privacy}));}else if(q.audienceType===h.PERSON){k.appendContent(o,k.create('input',{name:'friendTarget',type:'hidden',value:q.audienceTargets.toString()}));}else if(q.audienceType===h.MESSAGE){k.appendContent(o,k.create('input',{name:'messageTarget',type:'hidden',value:q.audienceTargets.toString()}));}else if(q.audienceType===h.GROUP){k.appendContent(o,k.create('input',{name:'groupTarget',type:'hidden',value:q.audienceTargets.toString()}));}else if(q.audienceType===h.PAGE)k.appendContent(o,[k.create('input',{name:'pageTarget',type:'hidden',value:q.audienceTargets.toString()}),k.create('input',{name:'av',type:'hidden',value:q.actorId})]);if(q.taggedPeople){var s=0;q.taggedPeople.forEach(function(t){k.appendContent(o,k.create('input',{name:'composertags_with['+s+']',type:'hidden',value:t}));s++;});}k.appendContent(o,[k.create('input',{name:'xhpc_message_text',type:'hidden',value:q.message}),k.create('input',{name:'xhpc_message',type:'hidden',value:q.message}),k.create('input',{name:'composertags_place',type:'hidden',value:q.taggedPlace}),k.create('input',{name:'action_type_id[]',type:'hidden',value:q.taggedActionId}),k.create('input',{name:'icon_id',type:'hidden',value:q.taggedActionIconId}),k.create('input',{name:'object_id[]',type:'hidden',value:q.taggedObjectId}),k.create('input',{name:'object_str[]',type:'hidden',value:q.taggedObjectStr}),k.create('input',{name:'is_react',type:'hidden',value:'true'})]);},getPropsFromAsyncResponse:function(q){var r=q,s=r.sources,t=(function(ga,ha){var ia={},ja=Object.prototype.hasOwnProperty;if(ga==null)throw new TypeError();for(var ka in ga)if(ja.call(ga,ka)&&!ja.call(ha,ka))ia[ka]=ga[ka];return ia;})(r,{sources:1}),u=s,v=u.person,w=u.personTag,x=u.personWall,y=u.group,z=u.page,aa=u.mentions,ba=u.place,ca=u.feeling,da=u.action,ea=u.object,fa=(new i()).addSource(i.TYPES.ACTION,da).addSource(i.TYPES.GROUP,y).addSource(i.TYPES.FEELING,ca).addSource(i.TYPES.MENTIONS,aa).addSource(i.TYPES.MESSAGE,v).addSource(i.TYPES.OBJECT,ea).addSource(i.TYPES.PAGE,z).addSource(i.TYPES.PERSON,w).addSource(i.TYPES.PERSON_WALL,x).addSource(i.TYPES.PLACE,ba);return Object.assign({dataSources:fa},t);}};e.exports=p;},null);