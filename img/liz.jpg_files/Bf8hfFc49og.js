/*!CK:3207522165!*//*1435555252,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["KgBy7"]); }

__d("OGHovercardLayerHideOnBlur",["ContextualThing","DOM","Event"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();function j(k){this._layer=k;}Object.assign(j.prototype,{_subscriptions:null,_clickListener:null,enable:function(){this._subscriptions=[this._layer.subscribe('show',this._attach.bind(this)),this._layer.subscribe('hide',this._detach.bind(this))];if(this._layer.isShown())this._attach();},disable:function(){this._detach();while(this._subscriptions.length)this._subscriptions.pop().unsubscribe();this._subscriptions=null;},_detach:function(){this._clickListener&&this._clickListener.remove();this._clickListener=null;},_attach:function(){setTimeout(function(){this._clickListener=i.listen(document.documentElement,'click',this._maybeHide.bind(this));}.bind(this),0);},_maybeHide:function(event){var k=event.getTarget();if(h.contains(this._layer.getContent(),k)||g.containsIncludingLayers(this._layer.getContentRoot(),k))return;if(this._shouldHide(event))this._layer.hide();},_shouldHide:function(event){return true;}});e.exports=j;},null);
__d("OGAggregationHovercardTarget",["Event","ArbiterMixin","AsyncRequest","ContextualDialog","ContextualDialogArrow","CSS","DOM","LayerHideOnBlur","LayerHideOnEscape","OGHovercardLayerHideOnBlur","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){b.__markCompiled&&b.__markCompiled();var s=350,t={};function u(w){return new j({addedBehaviors:[n,o],arrowBehavior:k,classNames:[w]},m.create('div',{className:"_4q1"},r._("Loading..."))).setWidth(s);}Object.assign(v,{setHovercard:function(w,x){var y=t[w];y&&y.setHovercard(x);}});function v(w,x,y,z,aa,ba,ca,da,ea){t[x]=this;this._targetID=x;this._endpoint=y;this._preventClose=aa||[];this._position=ca||'below';this._dialogClass=da||'';this._fetchOnHover=ea;this.init(w);for(var fa=0,ga=z.length;fa<ga;fa++){var ha=z[fa];this.addTrigger(ha.element,ha.trigger_class,ha.context);}if(ba)this.showHovercard(null,null);}Object.assign(v.prototype,h,{init:function(w){this._hovercardShown=false;this._hovercardScheduled=false;this._target=w;this._triggers=[];this._hovercard=null;this._fetching=false;this._placeholder=null;this._placeholderListener=null;this._shownClass='hover_shown';this._triggerClass=null;this._currentTrigger=null;this._context=null;return this;},addTrigger:function(w,x,y){this._triggers.push(w);g.listen(w,'click',this._onTriggerClick.bind(this,w,x,y));if(this._fetchOnHover)g.listen(w,'mouseover',this._onTriggerMouseOver.bind(this));},_onTriggerMouseOver:function(){this._fetch();},_onTriggerClick:function(w,x,y){y=y||this._target;if((this._hovercardShown&&(this._hovercard.getContext()===y))||(this._hovercardScheduled&&(this._placeholder.getContext()===y))||((this._hovercardShown||this._hovercardScheduled)&&(this._currentTrigger===w))){this._currentTrigger=null;this.hideHovercard();return;}this.hideHovercard();this._currentTrigger=w;this.showHovercard(x,y);},_fetch:function(){if(this._hovercard!=null||this._fetching)return;this._fetching=true;var w=function(){this._fetching=false;},x=function(){this.hideHovercard();};new i(this._endpoint).setData({hover_target:this._targetID}).setMethod('GET').setReadOnly(true).setErrorHandler(x.bind(this)).setTransportErrorHandler(x.bind(this)).setFinallyHandler(w.bind(this)).send();},setHovercard:function(w){var x=this;this._hovercard=w;for(var y in p)if(p.hasOwnProperty(y))aa[y]=p[y];var z=p===null?null:p.prototype;aa.prototype=Object.create(z);aa.prototype.constructor=aa;aa.__superConstructor__=p;function aa(ba){"use strict";p.call(this,ba);}aa.prototype.$conditionalHideOnBlur0=function(event){"use strict";var ba=event.getTarget();for(var ca=0,da=x.$conditionalHideOnBlur1.length;ca<da;ca++)if(m.contains(x.$conditionalHideOnBlur1[ca],ba))return false;return true;};this._hovercard.setPosition(this._position).setAlignment('center').enableBehaviors([aa,o]);this._hovercard.subscribe('aftershow',this._onHovercardShow.bind(this));this._hovercard.subscribe('hide',this._onHovercardHide.bind(this));this._hovercard.subscribe('destroy',this._onHovercardDestroy.bind(this));if(this._hovercardScheduled)this.showHovercard(this._triggerClass,this._context);},showHovercard:function(w,x){l.addClass(this._target,this._shownClass);if(this._triggerClass&&this._triggerClass!==w)l.removeClass(this._target,this._triggerClass);this._triggerClass=w;this._triggerClass&&l.addClass(this._target,this._triggerClass);this._context=x;if(this._hovercard){this._hovercard.setContext(x||this._target).show();this._hovercardShown=true;this._hovercardScheduled=false;this._hidePlaceholder();}else{this._hovercardScheduled=true;this._fetch();this._showPlaceholder();}this.inform('showhovercard');},hideHovercard:function(){this._hovercardScheduled=false;this._hidePlaceholder();if(this._hovercard){this._hovercard.hide();}else this._onHovercardHide();},_showPlaceholder:function(){if(!this._placeholder){this._placeholder=u(this._dialogClass);this._placeholder.setContext(this._context||this._target).setPosition(this._position).setAlignment('center').show();this._placeholderListener=this._placeholder.subscribe('hide',this._onPlaceholderHide.bind(this));}},_hidePlaceholder:function(){this._placeholder&&this._placeholder.hide();},_onPlaceholderHide:function(){if(this._placeholder){this._hovercardScheduled=false;this._placeholderListener&&this._placeholder.unsubscribe(this._placeholderListener);this._placeholder=null;!this._hovercardShown&&this._removeTriggerClasses();}},_onHovercardShow:function(){var w=this._hovercard.getContent(),x=m.scry(w,'textarea.mentionsTextarea')[0];x&&x.focus();},_onHovercardHide:function(){this._hovercardShown=false;this._removeTriggerClasses();this.inform('hidehovercard');},_onHovercardDestroy:function(){this._hovercard=null;},_removeTriggerClasses:function(){l.removeClass(this._target,this._shownClass);this._triggerClass&&l.removeClass(this._target,this._triggerClass);}});e.exports=v;},null);
__d("PhotoMultiPhotosThumb",["Event","Style"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();var i=1200,j={init:function(k,l){var m=null,n=0;function o(q){n=q;l.forEach(function(r,s){h.set(r,'opacity',s===q?1:0);});}function p(){o((n+1)%l.length);m=setTimeout(p,i);}g.listen(k,'mouseenter',function(){if(m)return;n=0;p();});g.listen(k,'mouseleave',function(){o(0);window.clearTimeout(m);m=null;});}};e.exports=j;},null);
__d("PhotoCurationControl",["Event","Parent","Toggler"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j={init:function(k){var l=h.byClass(k,'fbPhotoStarGridElement');g.listen(l,'mouseleave',function(){i.hide();});}};e.exports=j;},null);
__d("PhotoInlineActions",["Event","Arbiter","AsyncRequest","CSS","Nectar","Parent","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();var n={init:function(o,p,q,r,s,t,u,v,w,x){var y=false;h.subscribe(['UFI/CommentAddedActive','UFI/CommentDeletedActive','UFI/LikeActive'],function(z,aa){if(parseInt(o.getAttribute('data-fbid'),10)!==aa)return;if(z==='UFI/LikeActive')j.toggleClass(o,"_53a");new i().setURI('/ajax/photos/photo/refresh.php').setData({fbid:o.getAttribute('data-fbid')}).setRelativeTo(o).send();});g.listen(o,'click',function(event){var z=event.getTarget();if(y||!l.byClass(z,"_53b"))return;event.prevent();j.toggleClass(o,"_53a");var aa={};k.addModuleData(aa,o);y=new i().setURI('/ajax/photos/photo/like.php').setData(Object.assign({fbid:o.getAttribute('data-fbid'),relatedid:p,hovercardendpoint:q,includecommentlink:r,hovercardposition:s,includeleadingseparator:t,dialogClass:u,fetchOnHover:v,includeSocialContext:w,tagURI:x},aa)).setRelativeTo(o).setErrorHandler(function(){j.toggleClass(o,"_53a");}).setFinallyHandler(function(){y=false;}).send();});}};e.exports=n;},null);
__d("StarGridLayout",["Vector","removeFromArray"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();function i(j){"use strict";Object.assign(this,j);}i.prototype.getShortestColumn=function(j){"use strict";return j[0]<=j[1]?0:1;};i.prototype.getDangling=function(j){"use strict";var k=j.filter(function(l){return !this.isStarred(l);}.bind(this));if(k.length%2===1)return k[k.length-1];return null;};i.prototype.mangleOrder=function(j){"use strict";if(j.length<3||!(this.isFixed(j[0])&&this.isStarred(j[1])))return j;var k=this.nextNonStarred(j,2);if(!k)return j;var l=j.concat();h(l,k);l.splice(1,0,k);return l;};i.prototype.layout=function(j){"use strict";var k=[0,0],l=0,m=this.getDangling(j),n=[];j=this.mangleOrder(j);for(var o=0;o<j.length;++o){var p=this.getShortestColumn(k),q=j[o];if(this.isStarred(q)){this.renderStarred(this._grid,k,p,q);k[p]+=2;l=Math.max(l,(p*2)+2);}else{n.push(q);if(n.length===2||q===m){this.renderNonStarred(this._grid,k,p,n);l=Math.max(l,(p*2)+n.length);n=[];k[p]+=1;}}}return new g(l,Math.max.apply(null,k));};i.prototype.inNonStarredBlock=function(j,k,l,m){"use strict";return k===l[m]&&Math.floor(j/2)===m;};i.prototype.inStarredBlock=function(j,k,l,m){"use strict";return (k===l[m]||k===l[m]+1)&&Math.floor(j/2)===m;};i.prototype.nextNonStarred=function(j,k){"use strict";for(;k<j.length;++k)if(!this.isStarred(j[k]))return j[k];return null;};i.prototype.layoutReorder=function(j,k,l,m){"use strict";j=j.concat();l=Math.max(0,Math.min(3,l));m=Math.max(0,m);h(j,k);j.push(k);var n=[0,0],o=this.getDangling(j),p=false,q=[];for(var r=0;r<j.length;++r){var s=this.getShortestColumn(n),t=j[r];if(this.isStarred(t)){if(t===k)p=true;if(!p&&this.isStarred(k)&&this.inStarredBlock(l,m,n,s)&&this.inNonStarredBlock(l,m,n,s)){h(j,k);this.renderStarred(this._grid,n,s,k);n[s]+=2;s=this.getShortestColumn(n);p=true;}if(!p&&!this.isStarred(k)&&this.inStarredBlock(l,m,n,s)&&this.inNonStarredBlock(l,m,n,s)){h(j,k);if(q.length===1){q.splice(l%2,0,k);}else{var u=this.nextNonStarred(j,r);if(u){h(j,u);q.push(u);q.splice(l%2,0,k);}else q.push(k);}this.renderNonStarred(this._grid,n,s,q);q=[];n[s]+=1;o=this.getDangling(j.slice(r+1));s=this.getShortestColumn(n);p=true;}if(!p&&this.inStarredBlock(l,m,n,s)&&!this.inNonStarredBlock(l,m,n,s)){h(j,k);var u=this.nextNonStarred(j,r);j.push(k);if(u){h(j,u);j.splice(r,0,u);r--;continue;}m-=1;r--;continue;}this.renderStarred(this._grid,n,s,t);n[s]+=2;}else{q.push(t);if(q.length===2||t===o){if(!p&&!this.isStarred(k)&&this.inNonStarredBlock(l,m,n,s)){h(q,k);h(j,k);q.splice(l%2,0,k);if(q.length===3){h(j,q[2]);j.splice(r,0,q[2]);r=j.indexOf(q[2])-1;q.pop();}o=this.getDangling(j.slice(r+1));p=true;}if(!p&&this.isStarred(k)&&this.inNonStarredBlock(l,m,n,s)){h(j,k);this.renderStarred(this._grid,n,s,k);n[s]+=2;s=this.getShortestColumn(n);p=true;}this.renderNonStarred(this._grid,n,s,q);q=[];n[s]+=1;}}}};i.prototype.getStoringLayout=function(j){"use strict";return new i({grid:this._grid,isStarred:this.isStarred,isFixed:this.isFixed,renderStarred:function(k,l,m,n){j.push(n);},renderNonStarred:function(k,l,m,n){j.push(n[0]);if(n.length>1)j.push(n[1]);}});};i.prototype.reorder=function(j,k,l,m){"use strict";var n=[];this.getStoringLayout(n).layoutReorder(j,k,l,m);return n;};i.prototype.canonicalize=function(j){"use strict";var k=[];this.getStoringLayout(k).layout(j);return k;};e.exports=i;},null);
__d("StarGrid",["Arbiter","CSS","DataStore","DOM","Locale","Parent","Style","StarGridLayout","removeFromArray"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();var p={MARGIN:5,isStarred:function(q){return h.hasClass(q,'fbPhotoStarGridStarred');},isFixed:function(q){return h.hasClass(q,'fbPhotoStarGridFixed');},setPosition:function(q,r,s){var t=k.isRTL()?'margin-right':'margin-left';m.set(q,'position','absolute');m.set(q,'margin-top',r+'px');m.set(q,t,s+'px');},renderNonStarred:function(q,r,s,t){for(var u=0;u<t.length;++u){var v=r[s]*p.getSize(q),w=(s*2+u)*p.getSize(q);p.setPosition(t[u],v,w);}},renderStarred:function(q,r,s,t){var u=r[s]*p.getSize(q),v=s*2*p.getSize(q);p.setPosition(t,u,v);},mergeWithPreviousGrid:function(q){var r=q.previousSibling;if(r&&h.hasClass(r,'fbStarGrid')){h.addClass(r,'fbStarGridAppendedTo');while(q.firstChild)r.appendChild(q.firstChild);j.remove(q);q=r;}return q;},addPhotos:function(q){var r=j.scry(document.body,'.fbStarGrid')[0];if(!r)return;j.prependContent(r,q);var s=this.getSize(r);this.mergeAndLayoutGrid(r,s);},removeFromGrid:function(q){var r=l.byClass(q,'fbStarGrid'),s=p.getElements(r);o(s,q);j.remove(q);p.layoutGrid(r,s);g.inform('StarGrid/UPDATE',r);},removePhoto:function(q){var r=j.scry(document.body,'.fbPhotoStarGridElement[data-fbid="'+q+'"]')[0];this.removeFromGrid(r);},removeUntaggedPhoto:function(q){var r=j.scry(document.body,'.fbPhotoStarGridElement[data-fbid="'+q+'"]'+'[data-in-photos-of="1"]');if(r.length>0)this.removeFromGrid(r[0]);},removePhotos:function(q){var r,s;for(var t=0;t<q.length;t++){var u=q[t],v=j.scry(document.body,'.fbPhotoStarGridElement[data-fbid="'+u+'"]')[0];r=l.byClass(v,'fbStarGrid');s=p.getElements(r);o(s,v);j.remove(v);}p.layoutGrid(r,s);g.inform('StarGrid/UPDATE',r);},layoutGrid:function(q,r){var s=new n({_grid:q,isStarred:p.isStarred,isFixed:p.isFixed,renderNonStarred:p.renderNonStarred,renderStarred:p.renderStarred});p.setElements(q,r);var t=s.layout(r);m.set(q,'width',(t.x*p.getSize(q))+'px');m.set(q,'height',(t.y*p.getSize(q))+'px');},mergeAndLayoutGrid:function(q,r){var s=j.scry(q,'.fbPhotoStarGridElement'),t=p.mergeWithPreviousGrid(q),u=s;if(q!==t)u=p.getElements(t).concat(s);p.setElements(q,u);i.set(q,'size',r);p.layoutGrid(t,u);g.subscribe('PhotosBulkEditablePhoto.MOVED',function(v,w){p.removePhoto(w);}.bind(this));g.inform('StarGrid/UPDATE',q);},getSize:function(q){return i.get(q,'size');}};Object.assign(p,{getElements:function(q){var r=i.get(q,'elements');if(!r){r=j.scry(q,'div.fbPhotoStarGridElement');p.setElements(q,r);}return r;},setElements:function(q,r){i.set(q,'elements',r);}});e.exports=p;},null);
__d("TagSuggestionsDrawer",["AsyncRequest","PhotosAppSection"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();var i=false,j={init:function(){if(i)return;i=true;h.subscribe('toggle_drawer',j._onToggle);},_onToggle:function(k,l){if(l.button_clicked=='show'){j._notify(false);}else j._notify(true);},_notify:function(k){new g('/ajax/medley/tag_suggestions_drawer.php').setData({is_closed:k}).send();}};e.exports=j;},null);