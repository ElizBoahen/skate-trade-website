/*!CK:4278793818!*//*1438572852,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["Y\/sYM"]); }

__d("PhotoEditorLoggingConstants",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={COMPOSER_IMAGE_STICKER:"composer_sticker",COMPOSER_IMAGE_TEXT_OVERLAY:"composer_text_overlay",COMPOSER_IMAGE_HAS_CROP:"composer_has_crop",COMPOSER_IMAGE_HAS_FILTER:"composer_has_filter"};},null);
__d("ReactComposerFileActionType",["keyMirror"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();e.exports=g({RESET:null,SAVE_DROPBOX_FILE:null,SAVE_FILE:null,SET_FILE_CONFIG:null});},null);
__d("ReactComposerFileStore",["ReactComposerFileActionType","ReactComposerStoreBase","fbt"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();for(var j in h)if(h.hasOwnProperty(j))l[j]=h[j];var k=h===null?null:h.prototype;l.prototype=Object.create(k);l.prototype.constructor=l;l.__superConstructor__=h;function l(){"use strict";h.call(this,(function(){return {dialogAppURL:null,dropboxActionEndpoint:null,dropboxAppID:null,dropboxEnabled:null,dropboxFileID:null,file:null,maxFileUploadString:null,selectedDropboxFileName:this.$ReactComposerFileStore0(),selectedFileName:this.$ReactComposerFileStore0()};}.bind(this)),(function(m){switch(m.type){case g.RESET:this.$ReactComposerFileStore1(m);break;case g.SAVE_DROPBOX_FILE:this.$ReactComposerFileStore2(m);break;case g.SAVE_FILE:this.$ReactComposerFileStore3(m);break;case g.SET_FILE_CONFIG:this.$ReactComposerFileStore4(m);break;}}.bind(this)));}l.prototype.getDialogAppURL=function(m){"use strict";return this.getComposerData(m).dialogAppURL;};l.prototype.getDropboxActionEndpoint=function(m){"use strict";return this.getComposerData(m).dropboxActionEndpoint;};l.prototype.getDropboxAppID=function(m){"use strict";return this.getComposerData(m).dropboxAppID;};l.prototype.getDropboxEnabled=function(m){"use strict";return this.getComposerData(m).dropboxEnabled;};l.prototype.getDropboxFileID=function(m){"use strict";return this.getComposerData(m).dropboxFileID;};l.prototype.getFile=function(m){"use strict";return this.getComposerData(m).file;};l.prototype.getMaxFileUploadSize=function(m){"use strict";return this.getComposerData(m).maxFileUploadSize;};l.prototype.getMaxFileUploadString=function(m){"use strict";return this.getComposerData(m).maxFileUploadString;};l.prototype.getSelectedDropboxFileName=function(m){"use strict";return this.getComposerData(m).selectedDropboxFileName;};l.prototype.getSelectedFileName=function(m){"use strict";return this.getComposerData(m).selectedFileName;};l.prototype.getURI=function(m){"use strict";return this.hasFile(m)?'/ajax/groups/files/upload':'/ajax/groups/files/dropbox_publish';};l.prototype.hasDropboxFile=function(m){"use strict";return !!this.getComposerData(m).dropboxFileID;};l.prototype.hasFile=function(m){"use strict";return !!this.getComposerData(m).file;};l.prototype.isFileSelected=function(m){"use strict";var n=this.getComposerData(m);return !!n.file||!!n.dropboxFileID;};l.prototype.$ReactComposerFileStore0=function(){"use strict";return i._("No file chosen");};l.prototype.$ReactComposerFileStore1=function(m){"use strict";var n=this.validateAction(m,'composerID'),o=this.getComposerData(n);o.file=o.dropboxFileID=null;o.selectedFileName=o.selectedDropboxFileName=this.$ReactComposerFileStore0();this.emitChange(m.composerID);};l.prototype.$ReactComposerFileStore2=function(m){"use strict";var n=this.validateAction(m,['composerID','id','name']),o=n[0],p=n[1],q=n[2],r=this.getComposerData(o);r.dropboxFileID=p;r.selectedDropboxFileName=q;this.emitChange(o);};l.prototype.$ReactComposerFileStore3=function(m){"use strict";var n=this.validateAction(m,['composerID','file','name']),o=n[0],p=n[1],q=n[2],r=this.getComposerData(o);r.file=p;r.selectedFileName=q;this.emitChange(m.composerID);};l.prototype.$ReactComposerFileStore4=function(m){"use strict";var n=this.validateAction(m,['composerID','config']),o=n[0],p=n[1],q=this.getComposerData(o);q.dialogAppURL=p.dialogAppURL;q.dropboxActionEndpoint=p.dropboxActionEndpoint;q.dropboxAppID=p.dropboxAppID;q.dropboxEnabled=p.dropboxEnabled;q.maxFileUploadSize=p.maxFileUploadSize;q.maxFileUploadString=p.maxFileUploadString;this.emitChange(m.composerID);};e.exports=new l();},null);
__d("ReactComposerLifeEventActionTypes",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={ADD_LIFE_EVENT_TYPE_DETAILS:'ADD_LIFE_EVENT_TYPE_DETAILS',DESELECT_LIFE_EVENT_TYPE:'DESELECT_LIFE_EVENT_TYPE',SELECT_CATEGORY:'SELECT_CATEGORY',SELECT_LIFE_EVENT_TYPE:'SELECT_LIFE_EVENT_TYPE',SET_CONFIG:'SET_CONFIG',SET_LIFE_EVENT_TYPEAHEAD_TEXT:'SET_LIFE_EVENT_TYPEAHEAD_TEXT',SET_SELECTED_LIFE_EVENT_ICON:'SET_SELECTED_LIFE_EVENT_ICON',SET_SELECTED_LIFE_EVENT_SUBTITLE:'SET_SELECTED_LIFE_EVENT_SUBTITLE',SET_SELECTED_LIFE_EVENT_TITLE:'SET_SELECTED_LIFE_EVENT_TITLE'};},null);
__d("ReactComposerLifeEventActions",["ReactComposerDispatcher","ReactComposerLifeEventActionTypes"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();function i(){"use strict";}i.prototype.setConfig=function(j,k){"use strict";var l=h.SET_CONFIG;g.dispatch({composerID:j,config:k,type:l});};i.prototype.selectLifeEventType=function(j,k){"use strict";var l=h.SELECT_LIFE_EVENT_TYPE;g.dispatch({composerID:j,lifeEventType:k,type:l});};i.prototype.deselectLifeEventType=function(j){"use strict";var k=h.DESELECT_LIFE_EVENT_TYPE;g.dispatch({composerID:j,type:k});};i.prototype.setSelectedCategoryIndex=function(j,k){"use strict";var l=h.SELECT_CATEGORY;g.dispatch({composerID:j,index:k,type:l});};i.prototype.setLifeEventTypeaheadText=function(j,k){"use strict";var l=h.SET_LIFE_EVENT_TYPEAHEAD_TEXT;g.dispatch({composerID:j,text:k,type:l});};i.prototype.setSelectedLifeEventTitle=function(j,k){"use strict";var l=h.SET_SELECTED_LIFE_EVENT_TITLE;g.dispatch({composerID:j,title:k,type:l});};i.prototype.setSelectedLifeEventSubtitle=function(j,k){"use strict";var l=h.SET_SELECTED_LIFE_EVENT_SUBTITLE;g.dispatch({composerID:j,subtitle:k,type:l});};i.prototype.setSelectedLifeEventIcon=function(j,k){"use strict";var l=h.SET_SELECTED_LIFE_EVENT_ICON;g.dispatch({composerID:j,icon:k,type:l});};i.prototype.addLifeEventTypeDetails=function(j,k,l){"use strict";var m=h.ADD_LIFE_EVENT_TYPE_DETAILS;g.dispatch({composerID:j,details:l,lifeEventType:k,type:m});};e.exports=new i();},null);
__d("XLifeEventAsyncDetailsController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/life_event\/composer\/async_details\/",{life_event_type:{type:"Enum",required:true,enumType:0}});},null);
__d("ReactComposerLifeEventStore",["AsyncRequest","ReactComposerStoreBase","ReactComposerLifeEventActions","ReactComposerLifeEventActionTypes","ReactComposerLifeEventConstants","XLifeEventAsyncDetailsController","flattenArray"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();function n(s){return s.filter(function(t){return k.SUGGESTED_LIFE_EVENT_TYPES.indexOf(t.id)>=0;});}function o(s){var t=[];s.forEach(function(u){m(u.life_events).forEach(function(v){t.push(v);});});return t;}for(var p in h)if(h.hasOwnProperty(p))r[p]=h[p];var q=h===null?null:h.prototype;r.prototype=Object.create(q);r.prototype.constructor=r;r.__superConstructor__=h;function r(){"use strict";h.call(this,(function(){return {allLifeEventTypes:[],categories:[],lifeEventTypeaheadText:'',lifeEventTypeDetails:{},selectedCategoryIndex:(void 0),selectedLifeEvent:{},suggestedLifeEventTypes:[]};}),(function(s){switch(s.type){case j.SET_CONFIG:this.$ReactComposerLifeEventStore0(s);break;case j.SELECT_LIFE_EVENT_TYPE:this.$ReactComposerLifeEventStore1(s);break;case j.DESELECT_LIFE_EVENT_TYPE:this.$ReactComposerLifeEventStore2(s);break;case j.ADD_LIFE_EVENT_TYPE_DETAILS:this.$ReactComposerLifeEventStore3(s);break;case j.SELECT_CATEGORY:this.$ReactComposerLifeEventStore4(s);break;case j.SET_SELECTED_LIFE_EVENT_ICON:this.$ReactComposerLifeEventStore5(s);break;case j.SET_SELECTED_LIFE_EVENT_SUBTITLE:this.$ReactComposerLifeEventStore6(s);break;case j.SET_SELECTED_LIFE_EVENT_TITLE:this.$ReactComposerLifeEventStore7(s);break;case j.SET_LIFE_EVENT_TYPEAHEAD_TEXT:this.$ReactComposerLifeEventStore8(s);break;}}.bind(this)));}r.prototype.getCategories=function(s){"use strict";return this.getComposerData(s).categories;};r.prototype.getAllLifeEventTypes=function(s){"use strict";return this.getComposerData(s).allLifeEventTypes;};r.prototype.getSuggestedLifeEventTypes=function(s){"use strict";return this.getComposerData(s).suggestedLifeEventTypes;};r.prototype.getOtherID=function(s){"use strict";return this.getComposerData(s).otherID;};r.prototype.getSelectedLifeEventType=function(s){"use strict";return this.getComposerData(s).selectedLifeEvent.type;};r.prototype.getSelectedCategoryIndex=function(s){"use strict";return this.getComposerData(s).selectedCategoryIndex;};r.prototype.getSelectedLifeEventDetails=function(s){"use strict";var t=this.getComposerData(s).selectedLifeEvent;return Object.assign({},t);};r.prototype.getSelectedLifeEventIcon=function(s){"use strict";return this.getComposerData(s).selectedLifeEvent.icon;};r.prototype.getSelectedLifeEventSubtitle=function(s){"use strict";return this.getComposerData(s).selectedLifeEvent.subtitle;};r.prototype.getSelectedLifeEventTitle=function(s){"use strict";return this.getComposerData(s).selectedLifeEvent.title;};r.prototype.getLifeEventTypeaheadText=function(s){"use strict";return this.getComposerData(s).lifeEventTypeaheadText;};r.prototype.$ReactComposerLifeEventStore1=function(s){"use strict";var t=this.getComposerData(s.composerID);t.selectedLifeEvent={type:s.lifeEventType};if(t.lifeEventTypeDetails[s.lifeEventType]===(void 0)){this.$ReactComposerLifeEventStore9(s.composerID,s.lifeEventType);}else this.$ReactComposerLifeEventStorea(t);this.emitChange(s.composerID);};r.prototype.$ReactComposerLifeEventStore4=function(s){"use strict";var t=this.getComposerData(s.composerID);t.selectedCategoryIndex=s.index;this.emitChange(s.composerID);};r.prototype.$ReactComposerLifeEventStore5=function(s){"use strict";var t=this.getComposerData(s.composerID);t.selectedLifeEvent.icon=s.icon;this.emitChange(s.composerID);};r.prototype.$ReactComposerLifeEventStore6=function(s){"use strict";var t=this.getComposerData(s.composerID);t.selectedLifeEvent.subtitle=s.subtitle;this.emitChange(s.composerID);};r.prototype.$ReactComposerLifeEventStore7=function(s){"use strict";var t=this.getComposerData(s.composerID);t.selectedLifeEvent.title=s.title;this.emitChange(s.composerID);};r.prototype.$ReactComposerLifeEventStore2=function(s){"use strict";var t=this.getComposerData(s.composerID);t.lifeEventTypeaheadText='';t.selectedLifeEvent={};this.emitChange(s.composerID);};r.prototype.$ReactComposerLifeEventStore8=function(s){"use strict";var t=this.getComposerData(s.composerID);t.lifeEventTypeaheadText=s.text;this.emitChange(s.composerID);};r.prototype.$ReactComposerLifeEventStore3=function(s){"use strict";var t=this.getComposerData(s.composerID);t.lifeEventTypeDetails[s.lifeEventType]=s.details;this.$ReactComposerLifeEventStorea(t);this.emitChange(s.composerID);};r.prototype.$ReactComposerLifeEventStore0=function(s){"use strict";var t=this.getComposerData(s.composerID);if(s.config.categories){var u=s.config.categories,v=o(u);t.categories=u;t.allLifeEventTypes=v;t.suggestedLifeEventTypes=n(v);}if(s.config.otherID)t.otherID=s.config.otherID;this.emitChange(s.composerID);};r.prototype.$ReactComposerLifeEventStorea=function(s){"use strict";var t=s.selectedLifeEvent.type,u=s.lifeEventTypeDetails[t],v=s.otherID===t;s.selectedLifeEvent.title=v?s.lifeEventTypeaheadText:u.description;s.selectedLifeEvent.subtitle='';s.selectedLifeEvent.icon=u.icon;};r.prototype.$ReactComposerLifeEventStore9=function(s,t){"use strict";var u=l.getURIBuilder().setEnum('life_event_type',t).getURI();new g(u).setHandler(function(v){if(v.error)return;i.addLifeEventTypeDetails(s,t,v.payload);}).send();};e.exports=new r();},null);
__d("ReactComposerQuestionActionType",["keyMirror"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();e.exports=g({ADD_OPTION:null,ANYONE_ADD_OPTIONS:null,ENTER_POLL_OPTIONS_MODE:null,SAVE_OPTION_DATA:null,SET_QUESTION_CONFIG:null});},null);
__d("ReactComposerQuestionStore",["ReactComposerQuestionActionType","ReactComposerStoreBase","Map"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j=3;for(var k in h)if(h.hasOwnProperty(k))m[k]=h[k];var l=h===null?null:h.prototype;m.prototype=Object.create(l);m.prototype.constructor=m;m.__superConstructor__=h;function m(){"use strict";h.call(this,(function(){return {anyoneAddPollOptions:true,dataSource:null,maxOptionsShown:null,optionIDs:new i(),optionStrings:new i(),pollLinkEnabled:true};}),(function(n){switch(n.type){case g.ADD_OPTION:this.$ReactComposerQuestionStore0(n);break;case g.ANYONE_ADD_OPTIONS:this.$ReactComposerQuestionStore1(n);break;case g.ENTER_POLL_OPTIONS_MODE:this.$ReactComposerQuestionStore2(n);break;case g.SAVE_OPTION_DATA:this.$ReactComposerQuestionStore3(n);break;case g.SET_QUESTION_CONFIG:this.$ReactComposerQuestionStore4(n);break;}}.bind(this)));}m.prototype.canAnyoneAddPollOptions=function(n){"use strict";return this.getComposerData(n).anyoneAddPollOptions;};m.prototype.getDataSource=function(n){"use strict";return this.getComposerData(n).dataSource;};m.prototype.getMaxOptionsShown=function(n){"use strict";return this.getComposerData(n).maxOptionsShown;};m.prototype.getNumberOptionsShown=function(n){"use strict";return j;};m.prototype.getOptionIDs=function(n){"use strict";var o=[],p=this.getComposerData(n).optionIDs;p.forEach(function(q,r){o.push(q);});return o;};m.prototype.getOptionStrings=function(n){"use strict";var o=[],p=this.getComposerData(n).optionStrings;p.forEach(function(q,r){o.push(q);});return o;};m.prototype.getSearchSource=function(n){"use strict";return this.getComposerData(n).dataSource;};m.prototype.isPollLinkEnabled=function(n){"use strict";return this.getComposerData(n).pollLinkEnabled;};m.prototype.$ReactComposerQuestionStore0=function(n){"use strict";var o=this.validateAction(n,'composerID');j++;this.emitChange(o);};m.prototype.$ReactComposerQuestionStore1=function(n){"use strict";var o=this.validateAction(n,['composerID','value']),p=o[0],q=o[1],r=this.getComposerData(p);r.anyoneAddPollOptions=q;this.emitChange(p);};m.prototype.$ReactComposerQuestionStore2=function(n){"use strict";var o=this.validateAction(n,'composerID'),p=this.getComposerData(o);p.pollLinkEnabled=false;this.emitChange(o);};m.prototype.$ReactComposerQuestionStore3=function(n){"use strict";var o=this.validateAction(n,['composerID','optionData']),p=o[0],q=o[1],r=this.getComposerData(p);r.optionIDs.set(q.keyID,q.ID);r.optionStrings.set(q.keyID,q.content);this.emitChange(p);};m.prototype.$ReactComposerQuestionStore4=function(n){"use strict";var o=this.validateAction(n,['composerID','config']),p=o[0],q=o[1],r=this.getComposerData(p);r.dataSource=q.dataSource;r.maxOptionsShown=q.maxOptionsShown;this.emitChange(p);};e.exports=new m();},null);
__d("ReactComposerMultilingualStatusActionType",["keyMirror"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();e.exports=g({LANGUAGE_CREATED:null,LANGUAGE_CHANGED:null,LANGUAGE_REMOVED:null,SET_LANGUAGE_EDITOR_STATE:null,SET_SPECIFIED_POST_LANGUAGE:null});},null);
__d("ReactComposerMultilingualStatusStore",["ReactComposerMultilingualStatusActionType","ReactComposerStoreBase","getMentionsTextForContentState","immutable"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();var k=j.Record({languageDialect:null,editorState:null});for(var l in h)if(h.hasOwnProperty(l))n[l]=h[l];var m=h===null?null:h.prototype;n.prototype=Object.create(m);n.prototype.constructor=n;n.__superConstructor__=h;function n(){"use strict";h.call(this,(function(){return {statuses:j.List(),specifiedPostLanguage:''};}),(function(o){switch(o.type){case g.LANGUAGE_CREATED:this.$ReactComposerMultilingualStatusStore0(o);break;case g.LANGUAGE_REMOVED:this.$ReactComposerMultilingualStatusStore1(o);break;case g.LANGUAGE_CHANGED:this.$ReactComposerMultilingualStatusStore2(o);break;case g.SET_LANGUAGE_EDITOR_STATE:this.$ReactComposerMultilingualStatusStore3(o);break;case g.SET_SPECIFIED_POST_LANGUAGE:this.$ReactComposerMultilingualStatusStore4(o);break;}}.bind(this)));}n.prototype.getSpecifiedPostLanguage=function(o){"use strict";return this.getComposerData(o).specifiedPostLanguage;};n.prototype.getLanguageDialects=function(o){"use strict";return this.getStatuses(o).map(function(p){return p.languageDialect;}).toArray();};n.prototype.getMessages=function(o){"use strict";return this.getStatuses(o).map(function(p){var q=p.editorState.getCurrentContent();return i(q);}).toArray();};n.prototype.getStatuses=function(o){"use strict";return this.getComposerData(o).statuses;};n.prototype.getStatus=function(o,p){"use strict";var q=this.getComposerData(o),r=this.$ReactComposerMultilingualStatusStore5(q.statuses,p);return q.statuses.get(r);};n.prototype.$ReactComposerMultilingualStatusStore5=function(o,p){"use strict";var q=o.findIndex(function(r){return r.languageDialect===p;});if(q===-1)throw "Undefined status language dialect: "+p;return q;};n.prototype.$ReactComposerMultilingualStatusStore0=function(o){"use strict";var p=this.validateAction(o,['composerID','languageDialect','languageConfig']),q=p[0],r=p[1],s=p[2],t=this.getComposerData(q),u=new k({languageDialect:r,editorState:s.editorState});t.statuses=t.statuses.push(u);this.emitChange(q);};n.prototype.$ReactComposerMultilingualStatusStore1=function(o){"use strict";var p=this.validateAction(o,['composerID','languageDialect']),q=p[0],r=p[1],s=this.getComposerData(q),t=this.$ReactComposerMultilingualStatusStore5(s.statuses,r);s.statuses=s.statuses.splice(t,1);this.emitChange(q);};n.prototype.$ReactComposerMultilingualStatusStore2=function(o){"use strict";var p=this.validateAction(o,['composerID','oldLanguageDialect','newLanguageDialect']),q=p[0],r=p[1],s=p[2],t=this.getComposerData(q),u=this.$ReactComposerMultilingualStatusStore5(t.statuses,r);t.statuses=t.statuses.set(u,new k({languageDialect:s,editorState:t.statuses.get(u).editorState}));this.emitChange(q);};n.prototype.$ReactComposerMultilingualStatusStore3=function(o){"use strict";var p=this.validateAction(o,['composerID','languageDialect','editorState']),q=p[0],r=p[1],s=p[2],t=this.getComposerData(q),u=this.$ReactComposerMultilingualStatusStore5(t.statuses,r);t.statuses=t.statuses.set(u,new k({languageDialect:r,editorState:s}));this.emitChange(q);};n.prototype.$ReactComposerMultilingualStatusStore4=function(o){"use strict";var p=this.validateAction(o,['composerID','languageDialect']),q=p[0],r=p[1],s=this.getComposerData(q);s.specifiedPostLanguage=r;this.emitChange(q);};e.exports=new n();},null);
__d("ReactComposerAsyncRequest",["ReactComposerActions","ReactComposerPostUtilsCore","AsyncRequest"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();for(var j in i)if(i.hasOwnProperty(j))l[j]=i[j];var k=i===null?null:i.prototype;l.prototype=Object.create(k);l.prototype.constructor=l;l.__superConstructor__=i;function l(m,n){"use strict";i.call(this,n);this.$ReactComposerAsyncRequest0=m;k.setHandler.call(this,this.$ReactComposerAsyncRequest1.bind(this));k.setErrorHandler.call(this,this.$ReactComposerAsyncRequest2.bind(this));}l.prototype.setHandler=function(m){"use strict";this.$ReactComposerAsyncRequest3=m;return this;};l.prototype.setErrorHandler=function(m){"use strict";this.$ReactComposerAsyncRequest4=m;return this;};l.prototype.$ReactComposerAsyncRequest1=function(m){"use strict";setTimeout(function(){h.handlePostSucceeded(this.$ReactComposerAsyncRequest0);this.$ReactComposerAsyncRequest3&&this.$ReactComposerAsyncRequest3(m);}.bind(this),0);};l.prototype.$ReactComposerAsyncRequest2=function(m){"use strict";setTimeout(function(){g.postError(this.$ReactComposerAsyncRequest0,m);this.$ReactComposerAsyncRequest4&&this.$ReactComposerAsyncRequest4(m);}.bind(this),0);};e.exports=l;},null);
__d("ReactComposerLoggingStore",["ReactComposerActionTypes","ReactComposerAttachmentActionType","ReactComposerAttachmentStore","ReactComposerAttachmentType","ReactComposerPhotoActionType","ReactComposerPhotoStore","ReactComposerPhotoUploadActionType","ReactComposerPhotoUploadStore","ReactComposerStoreBase","ReactComposerTaggerActionType","ReactComposerTaggerStore","ReactComposerTaggerType","ReactComposerVideoUploadActionType","ComposerWaterfallEvent","ComposerXMarauderLogger","ComposerXSessionIDs","immutable","PhotosUploadWaterfallXMixin","PUWApplications","PUWMethods","PUWSteps","classWithMixins","mixin"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca){b.__markCompiled&&b.__markCompiled();var da=ba(o,ca(x));for(var ea in da)if(da.hasOwnProperty(ea))ga[ea]=da[ea];var fa=da===null?null:da.prototype;ga.prototype=Object.create(fa);ga.prototype.constructor=ga;ga.__superConstructor__=da;function ga(){"use strict";da.call(this,(function(){return {composerWaterfallQueue:w.List(),PUWQueue:w.List(),sessionID:null,uniqueEvents:w.Map([[aa.CLIENT_PUBLISH_SUCCESS,false],[aa.CLIENT_FLOW_SUCCESS,false]])};}),(function(ha){if(ha.composerID){this.$ReactComposerLoggingStore0(ha.composerID);this.$ReactComposerLoggingStore1(ha.composerID);}switch(ha.type){case h.SELECT_ATTACHMENT:this.$ReactComposerLoggingStore2(ha);break;case m.PHOTO_UPLOAD_INPUT_CLICKED:this.$ReactComposerLoggingStore3(ha);break;case m.PHOTO_UPLOAD_ENQUEUED:this.$ReactComposerLoggingStore4(ha);break;case m.PHOTO_UPLOAD_RESIZE_STARTED:this.$ReactComposerLoggingStore5(ha);break;case m.PHOTO_UPLOAD_RESIZE_DONE:this.$ReactComposerLoggingStore6(ha);break;case m.PHOTO_UPLOAD_RESIZE_FAILED:this.$ReactComposerLoggingStore7(ha);break;case m.PHOTO_UPLOAD_RESIZER_UNAVAILABLE:this.$ReactComposerLoggingStore8(ha);break;case m.PHOTO_UPLOAD_UPLOADING:this.$ReactComposerLoggingStore9(ha);break;case m.PHOTO_UPLOAD_DONE:this.$ReactComposerLoggingStorea(ha);break;case m.PHOTO_UPLOAD_FAILED:this.$ReactComposerLoggingStoreb(ha);break;case m.PHOTO_UPLOAD_REMOVE:this.$ReactComposerLoggingStorec(ha);break;case k.PHOTO_REMOVE:this.$ReactComposerLoggingStored(ha);break;case s.VIDEO_UPLOAD_ADD:this.$ReactComposerLoggingStoree(ha);break;case s.VIDEO_UPLOAD_REMOVE:this.$ReactComposerLoggingStoref(ha);break;case p.SET_SELECTED_TAGGER:this.$ReactComposerLoggingStoreg(ha);break;case g.POST_STARTED:this.$ReactComposerLoggingStoreh(ha);break;case g.POST_SUCCEEDED:this.$ReactComposerLoggingStorei(ha);break;case g.POST_ERROR:this.$ReactComposerLoggingStorej(ha);break;case m.PHOTOS_SELECT:this.$ReactComposerLoggingStorek(ha);break;case k.PHOTO_EDIT_STARTED:this.$ReactComposerLoggingStorel(ha);break;case k.PHOTO_EDIT_FINISHED:this.$ReactComposerLoggingStorem(ha);break;case m.PHOTO_UPLOAD_RETRY:this.$ReactComposerLoggingStoren(ha);break;default:}}.bind(this)));}ga.prototype.getSessionID=function(ha){"use strict";return v.getSessionID(ha);};ga.prototype.getRef=function(ha){"use strict";var ia=u.getInstance(ha);return ia&&ia.entryPointRef;};ga.prototype.getComposerVersion=function(ha){"use strict";var ia=u.getInstance(ha);return ia&&ia.composerVersion;};ga.prototype.getTargetType=function(ha){"use strict";var ia=u.getInstance(ha);return ia&&ia.targetType;};ga.prototype.$ReactComposerLoggingStore2=function(ha){"use strict";var ia=this.validateAction(ha,['composerID','id','extraData']),ja=ia[0],ka=ia[1],la=ia[2];if(ka!==j.STATUS)return;if(!la.fromFocus)return;this.$ReactComposerLoggingStoreo(ja,t.COMPOSER_ENTRY,{logOncePerSession:true});};ga.prototype.$ReactComposerLoggingStore3=function(ha){"use strict";var ia=this.validateAction(ha,'composerID');this.$ReactComposerLoggingStoreo(ia,t.MEDIA_INTENT);this.$ReactComposerLoggingStorep(ia,aa.CLIENT_FLOW_BEGIN,null,{logOncePerSession:true});this.$ReactComposerLoggingStorep(ia,aa.CLIENT_SELECT_BEGIN);};ga.prototype.$ReactComposerLoggingStore4=function(ha){"use strict";var ia=this.validateAction(ha,'composerID');this.$ReactComposerLoggingStoreo(ia,t.PHOTO_ADD);};ga.prototype.$ReactComposerLoggingStore5=function(ha){"use strict";var ia=this.validateAction(ha,['composerID','loggingData']),ja=ia[0],ka=ia[1];this.$ReactComposerLoggingStorep(ja,aa.CLIENT_PROCESS_BEGIN,ka);};ga.prototype.$ReactComposerLoggingStore6=function(ha){"use strict";var ia=this.validateAction(ha,['composerID','loggingData']),ja=ia[0],ka=ia[1];this.$ReactComposerLoggingStorep(ja,aa.CLIENT_PROCESS_SUCCESS,ka);};ga.prototype.$ReactComposerLoggingStore7=function(ha){"use strict";var ia=this.validateAction(ha,['composerID','loggingData']),ja=ia[0],ka=ia[1];this.$ReactComposerLoggingStorep(ja,aa.CLIENT_PROCESS_FAIL,ka);};ga.prototype.$ReactComposerLoggingStore8=function(ha){"use strict";var ia=this.validateAction(ha,'composerID');this.$ReactComposerLoggingStorep(ia,aa.CLIENT_PROCESS_UNAVAILABLE);};ga.prototype.$ReactComposerLoggingStore9=function(ha){"use strict";var ia=this.validateAction(ha,['composerID','fileUpload']),ja=ia[0],ka=ia[1];this.$ReactComposerLoggingStorep(ja,aa.CLIENT_TRANSFER_BEGIN,{bytes:ka.getFile().size});};ga.prototype.$ReactComposerLoggingStorea=function(ha){"use strict";var ia=this.validateAction(ha,['composerID','fileUpload','timeToUpload']),ja=ia[0],ka=ia[1],la=ia[2];this.$ReactComposerLoggingStoreo(ja,t.PHOTO_ADD_SUCCESS);this.$ReactComposerLoggingStorep(ja,aa.CLIENT_TRANSFER_SUCCESS,{bytes:ka.getFile().size,auto_retry_count:ka.getRetryCount(),dt:la,custom_tags:{manual_retry:!!ka.getFile().manuallyRetried}});};ga.prototype.$ReactComposerLoggingStoreb=function(ha){"use strict";var ia=this.validateAction(ha,['composerID','fileUpload','error','timeToUpload']),ja=ia[0],ka=ia[1],la=ia[2],ma=ia[3];this.$ReactComposerLoggingStoreo(ja,t.PHOTO_ADD_FAILURE);this.$ReactComposerLoggingStorep(ja,aa.CLIENT_TRANSFER_FAIL,{bytes:ka.getFile().size,error_code:la.code,error_info:la.description,auto_retry_count:ka.getRetryCount(),dt:ma,custom_tags:{manual_retry:!!ka.getFile().manuallyRetried}});};ga.prototype.$ReactComposerLoggingStorec=function(ha){"use strict";var ia=this.validateAction(ha,'composerID');this.$ReactComposerLoggingStoreo(ia,t.PHOTO_REMOVE);this.$ReactComposerLoggingStorep(ia,aa.CLIENT_TRANSFER_CANCEL);};ga.prototype.$ReactComposerLoggingStored=function(ha){"use strict";var ia=this.validateAction(ha,'composerID');this.$ReactComposerLoggingStoreo(ia,t.PHOTO_REMOVE);};ga.prototype.$ReactComposerLoggingStoree=function(ha){"use strict";var ia=this.validateAction(ha,'composerID');this.$ReactComposerLoggingStoreo(ia,t.VIDEO_ADD);};ga.prototype.$ReactComposerLoggingStoref=function(ha){"use strict";var ia=this.validateAction(ha,'composerID');this.$ReactComposerLoggingStoreo(ia,t.VIDEO_REMOVE);};ga.prototype.$ReactComposerLoggingStoreg=function(ha){"use strict";var ia=this.validateAction(ha,'composerID'),ja=this.validateAction(ha,'taggerID'),event=null;switch(ja){case r.PEOPLE:event=t.FRIEND_TAG_INTENT;break;case r.LOCATION:event=t.LOCATION_INTENT;break;case r.ACTIVITY:event=t.MINUTIAE_INTENT;break;default:break;}if(event===null)return;this.$ReactComposerLoggingStoreo(ia,event);};ga.prototype.$ReactComposerLoggingStoreh=function(ha){"use strict";var ia=this.validateAction(ha,'composerID');this.$ReactComposerLoggingStoreo(ia,t.COMPOSER_POST);if(this.$ReactComposerLoggingStoreq(ia))this.$ReactComposerLoggingStorep(ia,aa.CLIENT_PUBLISH_BEGIN,this.$ReactComposerLoggingStorer(ia));};ga.prototype.$ReactComposerLoggingStorei=function(ha){"use strict";var ia=this.validateAction(ha,'composerID');if(this.$ReactComposerLoggingStoreq(ia)){var ja=this.$ReactComposerLoggingStorer(ia);this.$ReactComposerLoggingStorep(ia,aa.CLIENT_PUBLISH_SUCCESS,ja);this.$ReactComposerLoggingStorep(ia,aa.CLIENT_FLOW_SUCCESS);}};ga.prototype.$ReactComposerLoggingStorej=function(ha){"use strict";var ia=this.validateAction(ha,'composerID');if(this.$ReactComposerLoggingStoreq(ia)){var ja=ha.response,ka=Object.assign(this.$ReactComposerLoggingStorer(ia),{error_code:ja&&ja.getError&&ja.getError(),error_info:ja&&ja.getErrorDescription&&ja.getErrorDescription()});this.$ReactComposerLoggingStorep(ia,aa.CLIENT_PUBLISH_FAIL,ka);}};ga.prototype.$ReactComposerLoggingStorek=function(ha){"use strict";var ia=this.validateAction(ha,['composerID','numPhotos','method']),ja=ia[0],ka=ia[1],la=ia[2],ma={method:la,volume:ka};this.$ReactComposerLoggingStorep(ja,aa.CLIENT_FLOW_BEGIN,null,{logOncePerSession:true});if(la!==z.FILE_SELECTOR)this.$ReactComposerLoggingStorep(ja,aa.CLIENT_SELECT_BEGIN);this.$ReactComposerLoggingStorep(ja,aa.CLIENT_SELECT_SUCCESS,ma);};ga.prototype.$ReactComposerLoggingStorel=function(ha){"use strict";var ia=this.validateAction(ha,'composerID');this.$ReactComposerLoggingStorep(ia,aa.CLIENT_PHOTO_EDIT_BEGIN);};ga.prototype.$ReactComposerLoggingStorem=function(ha){"use strict";var ia=this.validateAction(ha,'composerID');this.$ReactComposerLoggingStorep(ia,aa.CLIENT_PHOTO_EDIT_SUCCESS);};ga.prototype.$ReactComposerLoggingStoren=function(ha){"use strict";var ia=this.validateAction(ha,'composerID');this.$ReactComposerLoggingStorep(ia,aa.CLIENT_TRANSFER_MANUAL_RETRY);};ga.prototype.$ReactComposerLoggingStoreq=function(ha){"use strict";var ia=i.getIsAttachmentSelected(ha,j.MEDIA),ja=n.getUploads(ha);return ia&&!!ja.size;};ga.prototype.$ReactComposerLoggingStorer=function(ha){"use strict";var ia=q.getTaggerData(ha,r.PEOPLE)||[],ja=n.getTotalNumberOfStickersOnPhotos(ha);return {volume:l.getPhotos(ha).size,with_tag_count:ia.length,sticker_count:ja};};ga.prototype.$ReactComposerLoggingStoreo=function(ha,event,ia){"use strict";var ja=this.getComposerData(ha);if(ja.uniqueEvents.has(event)){if(!!ja.uniqueEvents.get(event))return;ja.uniqueEvents=ja.uniqueEvents.set(event,true);}if(!u.getInstance(ha)){ja.composerWaterfallQueue=ja.composerWaterfallQueue.push({composerID:ha,event:event,options:ia});return;}u.logEvent(event,ha,ia);};ga.prototype.$ReactComposerLoggingStorep=function(ha,ia,ja,ka,la){"use strict";var ma=this.getComposerData(ha);if(ma.uniqueEvents.has(ia)){if(!!ma.uniqueEvents.get(ia))return;ma.uniqueEvents=ma.uniqueEvents.set(ia,true);}if(!this.getSessionID(ha)){ma.PUWQueue=ma.PUWQueue.push({composerID:ha,step:ia,additionalData:ja,options:ka,callback:la});return;}this.logPUWStep(ia,this.getSessionID(ha),y.WEB_REACT_COMPOSER,this.getRef(ha),ja,ka,la);};ga.prototype.$ReactComposerLoggingStore0=function(ha){"use strict";var ia=this.getComposerData(ha),ja=ia.composerWaterfallQueue;if(ja.size===0)return;if(!u.getInstance(ha))return;ja.forEach(function(ka){return this.$ReactComposerLoggingStoreo(ka.composerID,ka.event,ka.options);}.bind(this));ia.composerWaterfallQueue=ja.clear();};ga.prototype.$ReactComposerLoggingStore1=function(ha){"use strict";var ia=this.getComposerData(ha),ja=ia.PUWQueue;if(ja.size===0)return;if(!this.getSessionID(ha))return;ja.forEach(function(ka){return this.$ReactComposerLoggingStorep(ka.composerID,ka.step,ka.additionalData,ka.options,ka.callback);}.bind(this));ia.PUWQueue=ja.clear();};e.exports=new ga();},null);
__d("XTimelineMLEWriteController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/mle\/save\/",{create_scrapbook:{type:"Bool",defaultValue:false}});},null);
__d("ReactComposerPostUtils",["ReactComposerActions","ReactComposerAsyncRequest","ReactComposerAttachmentStore","ReactComposerAttachmentType","ReactComposerAudienceStore","ReactComposerFileStore","ReactComposerLifeEventStore","ReactComposerLoggingStore","ReactComposerMinutiaeAttachmentStore","ReactComposerMultilingualStatusStore","ReactComposerPhotoStore","ReactComposerPhotoUploadStore","ReactComposerPostUtilsCore","ReactComposerQuestionStore","ReactComposerScrapedAttachmentStore","ReactComposerSellStore","ReactComposerStatusStore","ReactComposerStore","ReactComposerTaggerStore","ReactComposerTaggerType","ReactComposerVideoUploadStore","XTimelineMLEWriteController","ActorURI","Arbiter","HTML","PhotoEditorLoggingConstants","PhotoEditorSaveStates","PUWApplications","URI","invariant","isNumberLike"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka){b.__markCompiled&&b.__markCompiled();var la={publish:function(ma,na){g.publishStarted(ma);na=na||{};na.composer_id=ma;if(na.streamNode){na.streamStory=na.streamNode;}else if(na.streamMarkup)na.streamStory=ea(na.streamMarkup).getRootNode();if(na.contentID)na.matchData={content_id:na.contentID};da.inform('composer/publish',na);},isPostButtonDisabled:function(ma,na){var oa=q.isLimitExceeded(ma,na),pa=r.isUploading(ma),qa=q.isRecognizing(ma),ra=!!aa.getVideo(ma)&&x.isPosting(ma);return oa||pa||qa||ra;},post:function(ma){ja(!!ma.actorID);ja(!!ma.composerID);ja(!!ma.contextInfo);ja(!!ma.targetID);var na=ma.actorID,oa=ma.composerID,pa=i.getIsAttachmentSelected(oa,j.MEDIA),qa=i.getIsAttachmentSelected(oa,j.QANDA),ra=i.getIsAttachmentSelected(oa,j.FILE),sa=i.getIsAttachmentSelected(oa,j.QUESTION),ta=i.getIsAttachmentSelected(oa,j.SELL),ua=i.getIsAttachmentSelected(oa,j.LIFE_EVENT),va=this._getPostData(ma),wa=aa.getVideo(oa);if(pa&&!!wa){var xa=aa.getUploader(oa);xa&&xa.uploadFromFile(wa.file,va);return;}var ya,za=q.getPhotos(oa),ab=r.getUploads(oa),bb=ab.filter(function(ib){return za.some(function(jb){return jb.id===ib.photoID;});}),cb=bb.map(function(ib){return ib.photoID;}).toArray();if(ta)Object.assign(va,{composer_attachment_sell_title:v.getTitleText(oa),composer_attachment_sell_price:v.getPrice(oa),composer_attachment_sell_currency:v.getCurrencySymbol(oa),composer_attachment_sell_category:v.getCategoryID(oa),composer_attachment_sell_location_page_id:v.getLocationID(oa),composer_attachment_sell_pickup_note:v.getPickupNoteText(oa)});if((pa||qa||ta)&&za.size>0){ya=new ia('/media/upload/photos/composer/');Object.assign(va,{composer_unpublished_photo:cb,xy_tags:this._getXYTagData(oa),qn:n.getSessionID(oa),waterfallxapp:ha.WEB_REACT_COMPOSER},this._getCreativeEditingToolsData(bb));}else if(ra){ya=new ia(l.getURI(oa));Object.assign(va,{transaction_id:l.getDropboxFileID(oa)});}else if(sa){ya=new ia('/ajax/questions/save.php');var db=t.getOptionIDs(oa),eb=t.getOptionStrings(oa);db.push('');eb.push('');Object.assign(va,{composerAttachmentQuestion:w.getMessageText(oa),question_option_ids:db,question_options:eb,source:'group',create_eigenpoll:t.canAnyoneAddPollOptions(oa)});}else if(ta){ya=new ia('/ajax/groups/sell/save.php');}else if(ua){ya=ba.getURIBuilder().getURI();Object.assign(va,{story:m.getSelectedLifeEventSubtitle(oa),surface:'composer',title:m.getSelectedLifeEventTitle(oa),type:m.getSelectedLifeEventType(oa)});}else ya=new ia('/ajax/updatestatus.php');ya=ca.create(ya,na);var fb=new h(ma.composerID,ya).setData(va).setHandler(ma.onPostSuccess).setErrorHandler(ma.onPostFailure);if(ra&&l.hasFile(oa)){var gb=l.getFile(oa),hb=new FormData();hb.append('file1',gb);fb.setRawData(hb);}fb.send();},_getPostData:function(ma){var na=ma.composerID,oa=ma.targetID,pa=y.getTaggerData(na,z.PEOPLE)||[],qa=[],ra=[];pa.forEach(function(ib){qa.push(ib.getTitle());ra.push(ib.getUniqueID());});var sa=y.getTaggerData(na,z.ACTIVITY),ta=[],ua=[],va=[],wa;if(sa&&sa.action&&sa.object){ta.push(sa.action.getUniqueID());wa=sa.actionIconID;if(ka(sa.object.getUniqueID())){ua.push(sa.object.getUniqueID());va.push('');}else va.push(sa.object.getTitle());}var xa=!o.getMarkup(na),ya=p.getMessages(na),za=p.getLanguageDialects(na),ab=p.getSpecifiedPostLanguage(na),bb=y.getTaggerData(na,z.LOCATION),cb=bb?bb.place:null,db=y.getTaggerData(na,z.BACKDATE)||{},eb={year:this._sanitizeDateField(db.year),month:this._sanitizeDateField(db.month),day:this._sanitizeDateField(db.day),hour:this._sanitizeDateField(db.hour),minute:this._sanitizeDateField(db.minute)},fb=(bb&&bb.implicitLocation)?bb.implicitLocation.citypageid:null,gb,hb=k.getLegacyAudience(na);if(hb)gb=[{value:hb}];return Object.assign({action_type_id:ta,attachment:u.getAttachmentConfig(na),backdated_date:eb,audience:gb,composer_session_id:n.getSessionID(na),composertags_city:fb,composertags_place:(cb&&cb.getUniqueID())||fb,composertags_place_name:cb&&cb.getTitle(),composertags_with:ra,feed_targeted_data:y.getTaggerData(na,z.TARGETING),hide_object_attachment:xa,icon_id:wa,is_explicit_place:!!cb,is_q_and_a:i.getIsAttachmentSelected(na,j.QANDA),multilingual_statuses:ya,multilingual_status_langs:za,multilingual_specified_lang:ab,object_id:ua,object_str:va,privacyx:k.getAudience(na),ref:n.getRef(na),tagger_session_id:bb&&bb.sessionID,target_type:n.getTargetType(na),text_composertags_with:qa,xhpc_message:w.getMessage(na),xhpc_message_text:w.getMessageText(na)},s.getCoreData(na,ma.contextInfo,oa));},_sanitizeDateField:function(ma){return !ma||ma===-1||ma===0?null:ma;},_getXYTagData:function(ma){var na=q.getAllTaggedFaceboxes(ma);return na.map(function(oa){return {fbid:oa.get('photoID'),x:oa.get('x'),y:oa.get('y'),name:oa.get('taggedValue'),subject:oa.get('taggedSubjectID'),from_facebox:true,source:oa.get('isMagicTag')?'composerx_suggestions':'composerx_flyout'};});},_getCreativeEditingToolsData:function(ma){var na={},oa={},pa={},qa={};ma.forEach(function(sa){var ta=sa.get('photoID'),ua=ga.getLoggingData(sa.get('originalPhotoID'));if(ua){na[ta]=ua.hasFilter?true:null;oa[ta]=ua.hasCrop?true:null;pa[ta]=ua.textOverlays;qa[ta]=ua.stickers;}});var ra={};ra[fa.COMPOSER_IMAGE_HAS_FILTER]=na;ra[fa.COMPOSER_IMAGE_HAS_CROP]=oa;ra[fa.COMPOSER_IMAGE_TEXT_OVERLAY]=pa;ra[fa.COMPOSER_IMAGE_STICKER]=qa;return ra;}};e.exports=la;},null);
__d("ReactComposerEventStore",["ReactComposerActionStore","ReactComposerMediaConfig","ReactComposerPostUtils"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();for(var j in g)if(g.hasOwnProperty(j))l[j]=g[j];var k=g===null?null:g.prototype;l.prototype=Object.create(k);l.prototype.constructor=l;l.__superConstructor__=g;function l(){"use strict";g.call(this);}l.prototype.__onPostStarted=function(m){"use strict";i.post({actorID:m.actorID,composerID:m.composerID,contextInfo:m.config.contextInfo,targetID:m.targetID});};l.prototype.__canPost=function(m){"use strict";return !i.isPostButtonDisabled(m.composerID,h.photo.limit);};e.exports=new l();},null);